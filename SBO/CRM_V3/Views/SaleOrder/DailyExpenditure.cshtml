@{
    ViewBag.Title = "VehicleSalesInvoice";
    Layout = "~/Views/Shared/_LayoutV2.cshtml";
}


<style>

    .table > thead > tr > th{
        color : white;
    }

</style>

<section class="wrapper main-wrapper row">
    <form method="post" role="form" name="DailyExpenditure">
        <div class="col-xs-12">
            <section class="box">
                <div class="panel panel-primary">
                    <div class="panel-heading" style="text-align:center"><strong><span class=""></span>Daily Expenditure</strong></div>
                    <div class="panel-body">

                        <div class="row" style="margin-bottom:1rem; margin-left:1px">
                            <div class="form-group row">

                                <div class="col-md-4">
                                    <label class="form-label">Expense Invoice No</label>
                                    <div class="input-group">
                                        <div class="input-group-addon"><a data-toggle="modal" data-target="#ExpInvModal" style="color:blue"><i class="fa fa-search"></i></a></div>
                                        <input type="text" class="form-control" id="ExpInvNo" name="ExpInvNo" readonly>
                                    </div>
                                </div>


                                <div class="col-md-4">
                                    <label class="form-label">Expense Invoice Date</label>
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                        @*<input type="text" class="form-control" id="ExpInvDate" name="ExpInvDate" value="@ViewBag.CurrentDate" />*@
                                        <input type="text" class="form-control" name="ExpInvDate" id="ExpInvDate" value="@ViewBag.CurrentDate" readonly/>
                                    </div>
                                </div>

                                <div class="col-md-4" style="padding-right: 30px;">
                                    <label class="form-label">Total Expense</label>
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="fa fa-money"></i></span>
                                        <input type="text" class="form-control" name="ExpInvDate" id="txtTotalExpense" readonly/>
                                    </div>
                                </div>

                                @*<div class="col-md-4">
                                    <p style="color:#0084BF; text-align:right; font-size:larger; margin-right:30px">@TempData["success"]</p>
                                </div>*@


                                <div class="col-md-8">
                                    <label class="form-label">Naration</label>
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="fa fa-comment"></i></span>
                                        <input type="text" class="form-control" id="Remarks" name="Remarks" />
                                    </div>
                                </div>

                                <div class="col-md-1">
                                    <button type="button" class="btn btn-warning" id="btnVoucher" style="margin-top: 2.4rem; width: 100px">Voucher</button>
                                </div>

                            </div>
                        </div>

                        <div class="panel-group" id="accordion">
                            <div class="panel panel-success">
                                <div class="panel-heading">
                                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                                        <span class="glyphicon glyphicon-chevron-right"></span>
                                        Expense Details
                                    </a>
                                </div>
                                <div id="collapseTwo" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <div class="form-group row">
                                            <div class="col-md-4">
                                                <label class="form-label">Expense For</label>
                                                <div class="input-group">
                                                    <div class="input-group-addon"><a data-toggle="modal" data-target="#ReceiptHeadModal" style="color:blue"><i class="fa fa-search"></i></a></div>
                                                    <input type="text" class="form-control" id="ExpForDesc" name="ExpForDesc" readonly />
                                                    <span class="input-group-addon"><a href="@Url.Action("TaxPaymentReceiptHead","Definition")"><i class="fa fa-plus"></i></a></span>
                                                </div>
                                            </div>
                                            <input type="hidden" class="form-control" id="ExpFor" name="ExpFor" />

                                            <div class="col-md-4 pull-left">
                                                <label class="form-label">Account Code</label>
                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="glyphicon glyphicon-comment"></i></span>
                                                    <input type="text" class="form-control" id="txtAccountCode" name="AccountCode" />
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <label class="form-label">Expense To</label>
                                                <div class="input-group">
                                                    <div class="input-group-addon"><a data-toggle="modal" data-target="#DealerEmpModal" style="color:blue"><i class="fa fa-search"></i></a></div>
                                                    <input type="text" class="form-control" id="ExpPayDesc" readonly name="ExpPayDesc" />
                                                    <span class="input-group-addon"><a href="@Url.Action("EmployeeProfile","Definition")"><i class="fa fa-plus"></i></a></span>
                                                </div>
                                            </div>
                                        </div>
                                        <input type="hidden" class="form-control" id="ExpPayTo" name="ExpPayTo" />


                                        <div class="form-group row">
                                            <div class="col-md-4 pull-left">
                                                <label class="form-label">Description</label>
                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="glyphicon glyphicon-comment"></i></span>
                                                    <input type="text" class="form-control" id="ExpRemarks" name="ExpRemarks" />
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">Amount</label>
                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-credit-card"></i></span>
                                                    <input type="text" class="form-control" id="Amount" name="Amount" maxlength="8"  onkeypress="return isNumberKey(event)" />
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <button type="button" class="btn btn-primary" id="add" style="margin-top:25px; width:40%">+</button>
                                                <button type="button" class="btn btn-primary" id="Clear" style="margin-top:25px; width:40%">-</button>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="form-group row container-fluid">
                                        <div class="col-md-12">
                                            <div class="table-respon">
                                                <table id="Item" class="table table-bordered table-info">
                                                    <thead class="bg-primary">
                                                        <tr>
                                                            <th>Sr#</th>
                                                            <th>Expense No#</th>
                                                            <th>Expense Detail</th>
                                                            <th>Account Code</th>
                                                            <th>Payment To</th>
                                                            <th>Payment Desc</th>
                                                            <th>Remarks</th>
                                                            <th>Amount</th>
                                                            <th style="text-align : center">Action</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>



                            </div>
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                                        <span class="glyphicon glyphicon-chevron-right"></span>
                                        Instrument Details
                                    </a>
                                </div>
                                <div id="collapseOne" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <div class="row container-fluid" style="margin-bottom:1rem;">
                                            <div class="form-group row">
                                                <div class="col-md-4">
                                                    <label class="form-label">Payment Account</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon"><a data-toggle="modal" data-target="#PaymentAccountModal" style="color:blue"><i class="fa fa-search"></i></a></div>
                                                        <input type="text" class="form-control" id="CBDesc" name="CBDesc" readonly />
                                                        <span class="input-group-addon"><a href="@Url.Action("AccountSetup","Definition")"><i class="fa fa-plus"></i></a></span>
                                                    </div>
                                                </div>
                                                <input type="hidden" class="form-control" id="CBCode" name="CBCode" />
                                                <input type="hidden" class="form-control" id="txtAccountCode" />


                                                <div class="col-md-4">
                                                    <label class="form-label">Payment Mode</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon"><a data-toggle="modal" data-target="#PaymentModeDetail" style="color:blue"><i class="fa fa-search"></i></a></div>
                                                        <input type="text" class="form-control" id="PayModeDesc" name="PayModeDesc" />
                                                        <span class="input-group-addon"><a href="@Url.Action("PaymentMode","Definition")"><i class="fa fa-plus"></i></a></span>
                                                    </div>
                                                </div>
                                                <input type="hidden" class="form-control" id="PayModeCode" name="PayModeCode" />

                                                <div class="col-md-4">
                                                    <label class="form-label">Instrument Date</label>
                                                    <div class="input-group">
                                                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                        <input type="text" class="form-control datepicker" id="InsDate" placeholder="dd/mm/yyyy" name="InsDate"/>
                                                    </div>
                                                    <div class="makespace"></div>
                                                </div>

                                                <div class="col-md-4">
                                                    <label class="form-label">Instrument No</label>
                                                    <div class="input-group">
                                                        <span class="input-group-addon"><i class="glyphicon glyphicon-credit-card"></i></span>
                                                        <input type="text" class="form-control" id="InsNo" name="InsNo" />
                                                    </div>
                                                    <div class="makespace"></div>
                                                </div>

                                                <div class="col-md-4">
                                                    <label class="form-label">Bank</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon"><a data-toggle="modal" data-target="#BankAccountModal" style="color:blue"><i class="fa fa-search"></i></a></div>
                                                        <input type="text" class="form-control" id="BankDesc" name="BankDesc" />
                                                    </div>
                                                </div>
                                                <input type="hidden" class="form-control" id="BankCode" name="BankCode" />


                                                <div class="col-md-4">
                                                    <label class="form-label">Branch</label>
                                                    <div class="input-group">
                                                        <span class="input-group-addon"><i class="glyphicon glyphicon-home"></i></span>
                                                        <input type="text" class="form-control" id="Branch" name="Branch" />
                                                    </div>
                                                    <div class="makespace"></div>
                                                </div>

                                                <div class="col-md-4">
                                                    <label class="form-label">Instrument Amount</label>
                                                    <div class="input-group">
                                                        <span class="input-group-addon"><i class="glyphicon glyphicon-credit-card"></i></span>
                                                        <input type="text" class="form-control" id="InsAmount" maxlength="8" name="InsAmount" onkeypress="return isNumberKey(event)" />
                                                    </div>
                                                    <div class="makespace"></div>
                                                </div>

                                                <div class="col-md-8" style="margin-top: 30px;">
                                                    <label class="form-label" id="lblMessage"></label>                                                    
                                                    <div class="makespace"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            



                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="col-md-4" style="margin-top: 27px;">
                                        <p style="color:#0084BF; text-align:right; font-size:larger; margin-right:30px">@TempData["success"]</p>
                                    </div>
                                    <div class="pull-right col-md-8" style="text-align: right;" >

                                        <button type="submit" class="btn btn-info" id="savebtn" style="margin-top:27px; width:100px">Save</button>

                                        <button type="button" class="btn btn-danger" onclick="DeleteExpenseDetail()"  id="deletebtn" style="margin-top:27px; width:100px">Delete</button>

                                        <button type="reset" class="btn btn-default" id="clearbtn" style="margin-top:27px; width:100px">Clear</button>

                                        <button type="button" class="btn btn-success" id="btnPrint" style="margin-top:27px; width:100px">Print</button>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
</section>
        </div>
                    <style>
                        .border-for {
                            border: 1px solid blue;
                        }

                        .label-heading {
                            margin: 0.5rem;
                        }
                        .divider {
                            width: 5px;
                            height: auto;
                            display: inline-block;
                        }
                    </style>

    </form>
</section>







@*Modals*@

@*Expanse Invoice Modal*@
<div class="modal fade bs-example-modal-lg" tabindex="-1" id="ExpInvModal" role="dialog" aria-labelledby="modal123Label" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" style="margin-top:100px; height:500px;width:800px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="modal123Label">Daily Expenditure Detail</h4>
            </div>
            <div class="modal-body">
                <div class="form-group row">
                    <label for="exampleInputuname" class="col-md-2">Search :</label>
                    <div class="col-md-10">
                        <input type="text" id="AccountSearchSO" class="form-control" aria-controls="ExpInvSearch" placeholder="Search . . . ">
                    </div>
                </div>
                <div class="form-group row" style="margin-left:10px">
                    <div class="table-responsive table-Scroll" style="overflow: scroll; height:280px;width:750px">
                        <table id="AccountTableSO" class="table color-table info-table">
                            <thead class="bg-primary">
                                <tr>
                                    <th class="tdDiv" style="text-align:left" width:"30%">Expanse Code</th>
                                    <th class="tdDiv" style="text-align:left" width:"30%">Expanse Name</th>
                                    <th class="tdDiv" style="text-align:left" width:"30%">Total Amount</th>
                                   
                                </tr>
                            </thead>
                            <tbody style="font-size:12px; text-transform: uppercase">
                                @if (ViewBag.ExpData != null)
                                {
                                    foreach (var item in ViewBag.ExpData)
                                    {
                                        <tr style="text-align: left" onclick="Expense('@item.DealerCode','@item.ExpInvNo')">
                                            <td class="tdDiv">
                                                <a href="#" style="color:black">@item.ExpInvNo</a>
                                            </td>
                                            <td class="tdDiv">
                                                <a href="#" style="color:black">@item.Remarks</a>
                                            </td>
                                            <td class="tdDiv">
                                                <a href="#" style="color:black">@item.InsAmount</a>
                                            </td>

                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger waves-effect text-left" data-dismiss="modal">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>



<div class="modal fade bs-example-modal-lg" tabindex="-1" id="ReceiptHeadModal" role="dialog" aria-labelledby="modal123Label" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" style="margin-top:100px; height:500px;width:800px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="modal123Label">Expanse For Detail</h4>
            </div>
            <div class="modal-body">
                <div class="form-group row">
                    <label for="exampleInputuname" class="col-md-2">Search :</label>
                    <div class="col-md-10">
                        <input type="text" id="AccountSearchSO" class="form-control" aria-controls="ExpanseHeadSearch" placeholder="Search . . . ">
                    </div>
                </div>
                <div class="form-group row" style="margin-left:10px">
                    <div class="table-responsive table-Scroll" style="overflow: scroll; height:280px;width:750px">
                        <table id="AccountTableSO" class="table color-table info-table">
                            <thead class="bg-primary">
                                <tr>
                                    @*<th class="tdDiv" style="text-align:left" width:"30%">Code</th>*@
                                    <th class="tdDiv" style="text-align:left" width:"30%">Receipt Head Code</th>
                                    <th class="tdDiv" style="text-align:left" width:"30%">Receipt Head Desc</th>
                                    <th class="tdDiv" style="text-align:left" width:"30%">Account Code</th>
                                </tr>
                            </thead>
                            <tbody style="font-size:12px; text-transform: uppercase">
                                @if (ViewBag.ReceiptHead != null)
                                {
                                    foreach (var item in ViewBag.ReceiptHead)
                                    {
                                        <tr style="text-align: left" onclick="ClickReceiptHead('@item.DealerCode','@item.ECode','@item.EDesc','@item.AccountCode')">
                                           
                                            <td class="tdDiv">
                                                <a href="#" style="color:black">@item.ECode</a>
                                            </td>
                                            <td class="tdDiv">
                                                <a href="#" style="color:black">@item.EDesc</a>
                                            </td>
                                            <td class="tdDiv">
                                                <a href="#" style="color:black">@item.AccountCode</a>
                                            </td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger waves-effect text-left" data-dismiss="modal">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>


<div class="modal fade bs-example-modal-lg" tabindex="-1" id="DealerEmpModal" role="dialog" aria-labelledby="modal123Label" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" style="margin-top:100px; height:500px;width:800px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="modal123Label">Pay To Detail</h4>
            </div>
            <div class="modal-body">
                <div class="form-group row">
                    <label for="exampleInputuname" class="col-md-2">Search :</label>
                    <div class="col-md-10">
                        <input type="text" id="AccountSearchSO" class="form-control" aria-controls="DealerEmpSearch" placeholder="Search . . . ">
                    </div>
                </div>
                <div class="form-group row" style="margin-left:10px">
                    <div class="table-responsive table-Scroll" style="overflow: scroll; height:280px;width:750px">
                        <table id="AccountTableSO" class="table color-table info-table">
                            <thead class="bg-primary">
                                <tr>
                                    <th class="tdDiv" style="text-align:left" width:"30%">Dealer Code</th>
                                    <th class="tdDiv" style="text-align:left" width:"30%">Dealer Name</th>
                                   
                                </tr>
                            </thead>
                            <tbody style="font-size:12px; text-transform: uppercase">
                                @if (ViewBag.DealerEmp != null)
                                {
                                    foreach (var item in ViewBag.DealerEmp)
                                    {
                                        <tr style="text-align: left" onclick="ClickDealerEmp('@item.EmpCode','@item.EmpName')">
                                            <td class="tdDiv">
                                                <a href="#" style="color:black">@item.EmpCode</a>
                                            </td>
                                            <td class="tdDiv">
                                                <a href="#" style="color:black">@item.EmpName</a>
                                            </td>

                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger waves-effect text-left" data-dismiss="modal">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>



<div class="modal fade bs-example-modal-lg" tabindex="-1" id="PaymentAccountModal" role="dialog" aria-labelledby="modal123Label" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" style="margin-top:100px; height:500px;width:800px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="modal123Label">Payment Account Detail</h4>
            </div>
            <div class="modal-body">
                <div class="form-group row">
                    <label for="exampleInputuname" class="col-md-2">Search :</label>
                    <div class="col-md-10">
                        <input type="text" id="AccountSearchSO" class="form-control" aria-controls="DealerEmpSearch" placeholder="Search . . . ">
                    </div>
                </div>
                <div class="form-group row" style="margin-left:10px">
                    <div class="table-responsive table-Scroll" style="overflow: scroll; height:280px;width:750px">
                        <table id="AccountTableSO" class="table color-table info-table">
                            <thead class="bg-primary">
                                <tr>
                                    <th class="tdDiv" style="text-align:left" width:"30%">CB Code</th>
                                    <th class="tdDiv" style="text-align:left" width:"30%">CB Desc</th>
                                    <th class="tdDiv" style="text-align:left" width:"30%">Account Code</th>

                                </tr>
                            </thead>
                            <tbody style="font-size:12px; text-transform: uppercase">
                                @if (ViewBag.CashBankSetup != null)
                                    {
                                        foreach (var item in ViewBag.CashBankSetup)
                                        {
                                            <tr style="text-align: left" onclick="ClickCashBankSetup('@item.CBCode','@item.CBDesc','@item.AccountCode')">
                                                <td class="tdDiv">
                                                    <a href="#" style="color:black">@item.CBCode</a>
                                                </td>
                                                <td class="tdDiv">
                                                    <a href="#" style="color:black">@item.CBDesc</a>
                                                </td>
                                                <td class="tdDiv">
                                                    <a href="#" style="color:black">@item.AccountCode</a>
                                                </td>
                                            </tr>
                                        }
                                    }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger waves-effect text-left" data-dismiss="modal">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade bs-example-modal-lg" tabindex="-1" id="PaymentModeDetail" role="dialog" aria-labelledby="modal123Label" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" style="margin-top:100px; height:500px;width:800px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="modal123Label">Payment Mode Detail</h4>
            </div>
            <div class="modal-body">
                <div class="form-group row">
                    <label for="exampleInputuname" class="col-md-2">Search :</label>
                    <div class="col-md-10">
                        <input type="text" id="AccountSearchSO" class="form-control" aria-controls="PaymentModeSearch" placeholder="Search . . . ">
                    </div>
                </div>
                <div class="form-group row" style="margin-left:10px">
                    <div class="table-responsive table-Scroll" style="overflow: scroll; height:280px;width:750px">
                        <table id="AccountTableSO" class="table color-table info-table">
                            <thead class="bg-primary">
                                <tr>
                                    <th class="tdDiv" style="text-align:left" width:"30%">Code</th>
                                    <th class="tdDiv" style="text-align:left" width:"30%">Payment Mode Desc</th>

                                </tr>
                            </thead>
                            <tbody style="font-size:12px; text-transform: uppercase">
                                @if (ViewBag.PaymentMode != null)
                                    {
                                        foreach (var item in ViewBag.PaymentMode)
                                        {
                                            <tr style="text-align: left" onclick="ClickPaymentMode('@item.PayModeCode','@item.PayModeDesc')">
                                                <td class="tdDiv">
                                                    <a href="#" style="color:black">@item.PayModeCode</a>
                                                </td>
                                                <td class="tdDiv">
                                                    <a href="#" style="color:black">@item.PayModeDesc</a>
                                                </td>
                                            </tr>
                                        }
                                    }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger waves-effect text-left" data-dismiss="modal">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade bs-example-modal-lg" tabindex="-1" id="BankAccountModal" role="dialog" aria-labelledby="modal123Label" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" style="margin-top:100px; height:500px;width:800px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="modal123Label">Bank Account Detail</h4>
            </div>
            <div class="modal-body">
                <div class="form-group row">
                    <label for="exampleInputuname" class="col-md-2">Search :</label>
                    <div class="col-md-10">
                        <input type="text" id="AccountSearchSO" class="form-control" aria-controls="BankAccountSearch" placeholder="Search . . . ">
                    </div>
                </div>
                <div class="form-group row" style="margin-left:10px">
                    <div class="table-responsive table-Scroll" style="overflow: scroll; height:280px;width:750px">
                        <table id="AccountTableSO" class="table color-table info-table">
                            <thead class="bg-primary">
                                <tr>
                                    <th class="tdDiv" style="text-align:left" width:"30%">Bank Code</th>
                                    <th class="tdDiv" style="text-align:left" width:"30%">Bank Desc</th>

                                </tr>
                            </thead>
                            <tbody style="font-size:12px; text-transform: uppercase">
                                @if (ViewBag.Bank != null)
                                    {
                                        foreach (var item in ViewBag.Bank)
                                        {
                                            <tr style="text-align: left" onclick="ClickBank('@item.BankCode','@item.BankDesc')">
                                                <td class="tdDiv">
                                                    <a href="#" style="color:black">@item.BankCode</a>
                                                </td>
                                                <td class="tdDiv">
                                                    <a href="#" style="color:black">@item.BankDesc</a>
                                                </td>
                                            </tr>
                                        }
                                    }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger waves-effect text-left" data-dismiss="modal">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>



<script src='@Url.Content("~/assets/js/jquery-1.11.2.min.js")' type="text/javascript"></script>

<script type="text/javascript">

    var totalExpense = 0;

    $(document).ready(function () {

        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth() + 1; //January is 0!
        var yyyy = today.getFullYear();

        $(".datepicker").datepicker({
            dateFormat: "dd-mm-yy"
        });

        if (dd < 10) {
            dd = '0' + dd
        }

        if (mm < 10) {
            mm = '0' + mm
        }

        today = dd + '-' + mm + '-' + yyyy;

        $("#ExpInvDate").val(today);
        //$("#InsDate").val(today);
    })

    function isNumberKey(evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode
        if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;
        return true;
    }

    ClickReceiptHead = function (DealerCode,ReceiptHeadCode,ReceiptHeadDesc,AccountCode) {

        document.getElementById('ExpFor').value = ReceiptHeadCode;
        document.getElementById('ExpForDesc').value = ReceiptHeadDesc;
        document.getElementById('txtAccountCode').value = AccountCode;
        $("#ReceiptHeadModal").modal('hide');
    }

    ClickDealerEmp = function (EmpCode,EmpName) {

        document.getElementById('ExpPayTo').value = EmpCode;
        document.getElementById('ExpPayDesc').value = EmpName;
        $("#DealerEmpModal").modal('hide');

    }

    ClickCashBankSetup = function (CBCode, CBDesc, AccountCode) {

        document.getElementById('CBCode').value = CBCode;
        document.getElementById('CBDesc').value = CBDesc;
        document.getElementById('txtAccountCode').value = AccountCode;
        $("#PaymentAccountModal").modal('hide');
    }

    ClickPaymentMode = function (PayModeCode,PayModeDesc) {
        document.getElementById('PayModeCode').value = PayModeCode;
        document.getElementById('PayModeDesc').value = PayModeDesc;
        $("#PaymentModeDetail").modal('hide');
    }

    ClickBank = function (BankCode , BankDesc) {

        document.getElementById('BankCode').value = BankCode;
        document.getElementById('BankDesc').value = BankDesc;
        $("#BankAccountModal").modal('hide');
    }

    Expense = function (DealerCode,ExpInvNo) {
        document.getElementById("ExpInvNo").value = ExpInvNo;
        $.ajax({
            type: "POST",
            url: "/SaleOrder/DailyExpenseNoLookup",
            dataType: "json",
            contentType: 'application/json',
            data: JSON.stringify({ ExpInvNo: ExpInvNo }),
            contentType: "application/json;charset=utf-8",
            success: function (result) {
                if (result.SQMList.length > 0) {
                    $.each(result.SQMList, function (index, obj) {
                        debugger

                        document.getElementById("ExpInvDate").value = obj.ExpInvDate;
                        document.getElementById("Remarks").value = obj.Remarks;
                        document.getElementById("CBCode").value = obj.CBCode;
                        document.getElementById("CBDesc").value = obj.CBDesc;
                        document.getElementById("PayModeCode").value = obj.PayModeCode;
                        document.getElementById("PayModeDesc").value = obj.PayModeDesc;
                        document.getElementById("InsNo").value = obj.InsNo;
                        document.getElementById("InsDate").value = obj.InsDate;
                        document.getElementById("InsAmount").value = obj.InsAmount.toFixed(0);
                        document.getElementById("BankCode").value = obj.BankCode;
                        document.getElementById("Branch").value = obj.Branch;
                        document.getElementById("txtTotalExpense").value = obj.InsAmount.toFixed(0);
                        document.getElementById("BankDesc").value = obj.BankDesc;
                        document.getElementById("ExpFor").value = obj.CSCode;
                        document.getElementById("ExpForDesc").value = obj.CSDesc;
                    });
                    if (result.SQDList.length > 0) {
                        var Sr = 0;
                        $("#Item tbody tr").remove();
                        $.each(result.SQDList, function (index, obj) {
                            var row = '<tr class=""> '+
                                '<td> ' + ++Sr + '</td>' +
                                '<td>' + obj.ExpFor + ' </td>' +
                                '<td style="min-width:150px"> ' + obj.ExpForDesc + ' </td>' +
                                '<td>' + obj.AccountCode + ' </td>' +
                                '<td>' + obj.ExpPayTo + ' </td> '+
                                '<td>' + obj.ExpPayToDesc + ' </td>' +
                                '<td> ' + obj.ExpRemarks + ' </td> '+
                                '<td style="text-align:right"> ' + obj.Amount.toFixed(0) + '</td>' +
                                '<td style="text-align:center"><a class="selectTerm"><i class="fa fa-edit text-inverse m-r-10" style="color:blue"></i></a><a class= "DeletTerms" style="color:blue" ><i class="fa fa-trash text-danger"></i></a></td></tr>';

                            $("#Item tbody").append(row);
                        });

                        //calcTotal(document.getElementById('Item'));
                    }

                    $("#ExpInvModal").modal("hide");
                }
            }
        });
    }

    $("#btnPrint").click(function () {

        var baseurl = '@Url.Action("DailyExpenseReport")';
        var url = baseurl + '?EnquiryId=' + $('#ExpInvNo').val() + '&DealerCode=@Session["DealerCode"].ToString()';
        //window.location.href = url;
        window.open(url, '_blank');

    })

</script>



<!--Add data onto table-->
<script type="text/javascript">
    var tableItem = document.getElementById('Item');
    var i = 0;
    $(document).ready(function () {
        //calcTotal(tableItem);
        $("#add").click(function () {

            i++;
            if (!(checkEmptyItem())) {
                var itemNo = $("#ExpFor").val().trim();
                var len = tableItem.rows.length;

                var value = false;
                // check first empty row
                var rows = tableItem.rows;
                var firstRow = rows[1];
                var NFound = '';
                if (firstRow != undefined) {
                    NFound = firstRow.cells[0].innerHTML;
                }
                else {
                    NFound = "1";
                }
                for (var i = 1; i < len ; i++) {
                    if (NFound.substring(0, 2) != 'NO') {
                        if (tableItem.rows[i].cells[1].innerHTML.trim() === itemNo) {
                            value = true;
                            index = tableItem.rows[i];
                        }
                    }
                }
                if (value === false) {
                    if (NFound.substring(0, 2) === 'NO') {
                        $("#Item tbody tr").remove();
                        i = 1;
                    }
                    $("table#Item").append('<tr>' +
                        '<td>' + i + '</td><td>' + $("#ExpFor").val() + '</td>' +
                        '<td style="min-width:150px">' + $("#ExpForDesc").val().toUpperCase() + '</td>' +
                        '<td>' + $("#txtAccountCode").val().toUpperCase() + '</td>' +
                        '<td>' + $("#ExpPayTo").val().toUpperCase() + '</td>' +
                        '<td>' + $("#ExpPayDesc").val().toUpperCase() + '</td>' +
                        '<td>' + $("#ExpRemarks").val().toUpperCase() + '</td>' +
                        '<td>' + $("#Amount").val().toUpperCase() + '</td>' +
                        '<td style="text-align:center"><a class="selectTerm"><i class="fa fa-edit text-inverse m-r-5" style="color:blue"></i></a> | <a class= "DeletTerms" style="color:blue"><i class="fa fa-trash"></i></a></td></tr>');

                    totalExpense = parseInt(totalExpense) + parseInt($("#Amount").val());
                    clearItem();
                    $("#txtTotalExpense").val(totalExpense)
                    //calcTotal(tableItem);
                }
                else if (value === true) {
                    editItemRow();
                    //calcTotal(tableItem);
                }
            }

        });
    });
    // delete row in table
    $("table#Item").on('click', '.DeletTerms', function () {
        
        var Amount = $(this).closest('tr').find('td:eq(7)').text().trim();

        totalExpense = parseInt(totalExpense) - parseInt(Amount);

        $("#txtTotalExpense").val(totalExpense)

        $(this).closest('tr').remove();
    });
    // Edit row in table
    $("table#Item").on('click', '.selectTerm', function () {
        rIndex = $(this).closest('tr');
        index = $(this).closest('tr')[0].rowIndex;
        //rIndex = this.rowIndex;
        console.log(index);

        var a1 = rIndex.find('td:eq(1)').text().replace(/\s+/g, " ");
        var a2 = rIndex.find('td:eq(2)').text().replace(/\s+/g, " ");
        var a3 = rIndex.find('td:eq(3)').text().replace(/\s+/g, " ");
        var a4 = rIndex.find('td:eq(4)').text().replace(/\s+/g, " ");
        var a5 = rIndex.find('td:eq(5)').text().replace(/\s+/g, " ");
        var a6 = rIndex.find('td:eq(6)').text().replace(/\s+/g, " ");
        var a6 = rIndex.find('td:eq(7)').text().replace(/\s+/g, " ");

        document.getElementById('ExpFor').value = a1;
        document.getElementById('ExpForDesc').value = a2;
        document.getElementById('Amount').value = a3;
        document.getElementById('ExpPayTo').value = a4;
        document.getElementById('ExpPayDesc').value = a5;
        document.getElementById('ExpRemarks').value = a6;
        document.getElementById('Amount').value = a7;

        $(this).closest('tr').remove();
    });
    // Clear the Fields
    //function calcTotal(tableItem) {
    //    var Amount = 0;

    //    var len = tableItem.rows.length;
    //    var rows = tableItem.rows;
    //    var firstRow = rows[1];
    //    var NFound = '';
    //    if (firstRow != undefined) {
    //        NFound = firstRow.cells[0].innerHTML;
    //    }
    //    else {
    //        EmptyRow();
    //        NFound = "1";
    //    }
    //    NFound = NFound.trim();
    //    if (NFound.substring(0, 2) === 'NO') {
    //        //$("#TotalAmount").val(total);
    //    }
    //    else {
    //        for (var i = 1; i < len ; i++) {
    //            Amount += parseFloat(tableItem.rows[i].cells[6].innerHTML.trim());


    //        }
    //        document.getElementById("ExpTotalIncAmount").value = Amount.toFixed(4);
    //        document.getElementById("IncAmount").value = Amount.toFixed(4);
    //    }
    //}



    //Check for empty inputs before submit
    function checkAllEmptyInputs() {

        var isEmpty = false,
            CBCode = document.getElementById('CBCode').value,
            PayModeCode = document.getElementById('PayModeCode').value,
            Remarks = document.getElementById('Remarks').value;
        BankCode = document.getElementById('BankCode').value;
        tableItem = document.getElementById('Item');

        if (Remarks === '') {
            alert('Remarks cannot be Empty');
            isEmpty = true;
        }
        if (CBCode === '' && BankCode == '') {
            alert('Payment Account Code cannot be Empty');
            isEmpty = true;
        }
        debugger
        if (PayModeCode === '') {
            alert('Payment Mode cannot be Empty');
            isEmpty = true;
        }else if (PayModeCode === 'Q') {
            InsDate = document.getElementById('InsDate').value,
             InsNo = document.getElementById('InsNo').value,
             BankDesc = document.getElementById('BankDesc').value;
            Branch = document.getElementById('Branch').value;
            

            if (InsDate === '') {
                alert('Instrument Date cannot be Empty');
                isEmpty = true;
            }
            if (InsNo === '') {
                alert('Instrument No  cannot be Empty');
                isEmpty = true;
            }
            debugger
            if (BankDesc === '' || Branch === '') {
                alert('Bank Details cannot be Empty');
                isEmpty = true;
            }
        }

        if (tableItem.rows.length == 1) {
            alert('Expense Detail cannot be Empty');
            isEmpty = true;
        }


        return isEmpty;
        //  checkEmptyItem();
    }


    // check the empty input
    function checkEmptyItem() {
        var isEmpty = false,
            ExpFor = document.getElementById('ExpFor').value,
            ExpForDisc = document.getElementById('ExpForDesc').value,
            ExpPayTo = document.getElementById('ExpPayTo').value,
            ExpPayDisc = document.getElementById('ExpPayDesc').value,
            ExpRemarks = document.getElementById('ExpRemarks').value,

            Amount = document.getElementById('Amount').value;

        if (ExpFor === '') {
            alert('Expense no cannot be Empty');
            isEmpty = true;
        }
        else if (ExpForDisc === '') {
            alert('Expense description cannot be Empty');
            isEmpty = true;
        }

        else if (ExpPayTo === '') {
            alert('ExpPayTo cannot be Empty');
            isEmpty = true;
        }
        else if (ExpPayDisc === '') {
            alert('Description cannot be Empty');
            isEmpty = true;
        }
        else if (ExpRemarks === '') {
            alert('Expense Remarks cannot be Empty');
            isEmpty = true;
        }
        else if (Amount === '') {
            alert('Amount cannot be Empty');
            isEmpty = true;
        }
        return isEmpty;
    }
</script>
<script type="text/javascript">
    function clearItem() {
        // clear input text
        document.getElementById('ExpFor').value = '';
        document.getElementById('ExpForDesc').value = '';
        document.getElementById('ExpPayTo').value = '';
        document.getElementById('ExpPayDesc').value = '';
        document.getElementById('ExpRemarks').value = '';
        document.getElementById('Amount').value = '';
        document.getElementById('txtAccountCode').value = '';
    }

    var ItemTable = [];

    var tableItem = document.getElementById('Item');

    function ItemRows() {
        itemCount = 0;
        $("table#Item").find('tr').each(function () {
            if (itemCount != 0) {
                var itemList = $(this).find("td");
                // check empty row
                var rows = tableItem.rows;
                var firstRow = rows[1];
                var NFound = '';
                if (firstRow != undefined) {
                    NFound = firstRow.cells[0].innerHTML;
                }
                else {
                    NFound = "1";
                }
                NFound = NFound.trim();
                if (NFound.substring(0, 2) != 'NO') {
                    var vouch = {
                        ExpFor: $(itemList[1]).html().trim(), ExpPayTo: $(itemList[4]).html().trim(),
                        ExpRemarks: $(itemList[6]).html().trim(), Amount: $(itemList[7]).html().trim(),
                        AccountCode: $(itemList[3]).html().trim()
                    };
                    ItemTable.push(vouch);
                }
            }
            itemCount++;
        })
    }


    $("#savebtn").click(function (e) {
        e.preventDefault();
        if (!(checkAllEmptyInputs())) {

            ItemRows();

            // check empty row
            var rows = tableItem.rows;
            var firstRow = rows[1];
            var NFound = '';
            if (firstRow != undefined) {
                NFound = firstRow.cells[0].innerHTML;
            }
            else {
                NFound = "1";
            }
            NFound = NFound.trim();

            var ExpInvDate = $('#ExpInvDate').val();
            var InsDate = $('#InsDate').val();

            if (NFound.substring(0, 2) != 'NO') {
                //calcTotal(document.getElementById('Item'));
                $.ajax({
                    type: "POST",
                    url: "/SaleOrder/DExpense",
                    dataType: "json",
                    contentType: 'application/json',
                    data: JSON.stringify({ ItemTable: ItemTable, ExpInvDate: ExpInvDate, InsDate: InsDate }),
                    contentType: "application/json; charset=utf-8",
                    complete: function (data) {
                        document.forms["DailyExpenditure"].submit();
                    }
                });
            }
            else {
                alert("Table should not be empty");
            }
        }
    });



    RevClickDetail = function (DealerCode,ExpInvNo,ExpInvDate,Remarks,CBCode,PayModeCode,InsNo,InsDate,InsAmount,BankCode,Branch,ExpTotalInvAmount,VoucherNo) {

        debugger

        document.getElementById("ExpInvDate").value = ExpInvDate;
        document.getElementById("Remarks").value = Remarks;
        document.getElementById("CBCode").value = CBCode;
        //document.getElementById("CBDesc").value = CBCodeDisc.toUpperCase();
        document.getElementById("PayModeCode").value = PayModeCode;
        //document.getElementById("PayModeDesc").value = PayModeCodeDisc.toUpperCase();
        document.getElementById("InsNo").value = InsNo;
        document.getElementById("InsDate").value = InsDate;
        document.getElementById("InsAmount").value = InsAmount;
        document.getElementById("BankCode").value = BankCode;
        document.getElementById("Branch").value = Branch;
        //document.getElementById("ExpTotalIncAmount").value = ExpTotalInvAmount.toFixed(4);
        //document.getElementById("CSCode").value = CSCode;
        //document.getElementById("BankDesc").value = BankDisc;
        //document.getElementById("CSDesc").value = CSCodeDisc;
        var TransCode = VoucherNo;

        @*$.ajax({
            type: "Post",
            url: '@Url.Content("~/SaleOrder/IReceiptGetGridData")',
            dataType: "json",
            contentType: 'application/json',
            data: JSON.stringify({ TransCode: TransCode }),
            success: function (data) {
                if (data.length > 0) {
                    $.each(data, function (Index, obj) {

                        $("table#Item").append('<tr><td>' + obj.ProdCode +
                                        '</td><td style="min-width:100px">' + obj.MonthlyInstallment + '</td><td style="min-width:100px">' + obj.MonthlyInstallment + '</td><td>' +  + '</td><td style="text-align:left">' +
                                        '<td style="text-align:left"><a class="selectItem"><i class="fa fa-edit" style="color:blue"></i></a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class= "deleteItem" style="color:blue" ><i class="fa fa-trash"></i></a></td></tr>');

                    })
                }
            },
        });*@
        $("#ExpInvModal").modal("hide");
    }


    $("#btnVoucher").click(function () {

        var baseurl = '@Url.Action("VoucherMain","Voucher")';
        debugger
        var url = baseurl + '?leadId=' + $('#ExpInvNo').val() + '&type=DE';
        window.open(url, "_blank", "width=1000,height=600");
        //window.location.href = baseurl;
        //window.open(baseurl, '_blank');

    })

</script>


<!--Delete Expenditure-->
<script type="text/javascript">
    // Clear Button
    function ClearAll() {
        window.location.reload(true);
    }


    function DeleteExpenseDetail() {
        var ExpInvNo;

        ExpInvNo = $("#ExpInvNo").val();
        //var PRType = $("input[name='PRType']:checked").val();
        if (ExpInvNo != "") {
            $.ajax({
                url: '/SaleOrder/DailyExpenseMasterDelate',

                data: JSON.stringify({ ExpInvNo: ExpInvNo }),
                type: 'POST',
                contentType: 'application/json;',
                dataType: 'json',
                complete: function (data) {
                    window.location.reload(true);
                }
            });
        }
        else {
            alert("Expense No should not be empty.");
        }
    }
</script>
<!--Clear Expenditure-->
<script type="text/javascript">
    function ClearExpenseDetail() {
        $("#Item tbody tr").remove();
    }
</script>


<script>
    //Uzair Script

    $("#InsAmount").change(function () {
        debugger
        var insAmount = $("#InsAmount").val();

        var totalExp = $("#txtTotalExpense").val();

        if (insAmount > totalExp) {
            $("#lblMessage").text('Instrument Amount should not be greater than Total Expense Amount ');
            $("#lblMessage").css("color", "red");
                $("#InsAmount").css("border-color", "red");
                $("#savebtn").prop('disabled', true);
               
            } else {
            $("#savebtn").prop('disabled', false);
            $("#InsAmount").css("border-color", "#ccc");
            $("#lblMessage").text('');
            }



    })


</script>