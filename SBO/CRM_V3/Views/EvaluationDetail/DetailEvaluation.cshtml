
@{
    ViewBag.Title = "DetailEvaluation";
    Layout = "~/Views/Shared/_LayoutV2.cshtml";
}


<style>
    .makespace {
        margin-bottom: 0.5rem;
    }

    .icheckbox_minimal-blue {
        top: 10px;
    }
</style>

<link href="../assets/plugins/icheck/skins/all.css" rel="stylesheet" type="text/css" media="screen" />
<link href="../assets/plugins/icheck/skins/all.css" rel="stylesheet" type="text/css" media="screen" />
<script src="../assets/plugins/icheck/icheck.min.js" type="text/javascript"></script>

<section class="wrapper main-wrapper row">
    <form method="post">
        <div class="col-xs-12">
            <section class="box">
                <div class="panel panel-primary">
                    <div class="panel-heading" style="text-align:center; font-size:24px;"><strong>DealFail Price Offer / Evaluation</strong></div>

                    <div class="panel-body">
                        <div class="form-group row">

                            <div class="table-responsive" style="height:300px; width:auto">
                                <table id="RegNoTable" class="table table-striped table-hover responsive">
                                    <thead>
                                        <tr style="font-size:18px;">
                                            <th>EvaluationCode</th>
                                            <th>Evaluation Date</th>
                                            <th>Brand</th>
                                            <th>ProdCode </th>
                                            <th>Version </th>
                                            <th>Product</th>
                                            <th>Reg. No</th>
                                            <th>Reg. Date</th>
                                            <th>Chassis No</th>
                                            <th>Engine No</th>
                                            <th>Color</th>
                                            <th>Deal Fail</th>



                                        </tr>
                                    </thead>
                                    <tbody style="font-size:18px; text-transform: uppercase">

                                      
                                        @if (ViewBag.Evaluation != null)
                                        {

                                            foreach (var item in ViewBag.Evaluation)
                                            {
                                                <tr style="text-align: left" onclick="RevClickDetails('@item.EvaluationCode')">
                                                    <td class="tdDiv">
                                                        <label id="lblEvaluationCode"> @item.EvaluationCode  </label>

                                                    </td>
                                                    <td class="tdDiv">
                                                        <a href="#" style="color:black">@item.EvaluationDate</a>
                                                    </td>
                                                    <td class="tdDiv">
                                                        <a href="#" style="color:black">@item.BrandDesc</a>
                                                    </td>
                                                    <td class="tdDiv">
                                                        <a href="#" style="color:black">@item.ProdCode</a>
                                                    </td>
                                                    <td class="tdDiv">
                                                        <a href="#" style="color:black">@item.VersionCode</a>
                                                    </td>
                                                    <td class="tdDiv">
                                                        <a href="#" style="color:black">@item.ProdDesc</a>
                                                    </td>
                                                    <td class="tdDiv">
                                                        <a href="#" style="color:black">@item.RegNo</a>
                                                    </td>
                                                    <td class="tdDiv">
                                                        <a href="#" style="color:black">@item.RegDate</a>
                                                    </td>
                                                    <td class="tdDiv">
                                                        <a href="#" style="color:black">@item.ChassisNo</a>
                                                    </td>
                                                    <td class="tdDiv">
                                                        <a href="#" style="color:black">@item.EngineNo</a>
                                                    </td>
                                                    <td class="tdDiv">
                                                        <a href="#" style="color:black">@item.ColorDesc</a>
                                                    </td>
                                                    <td class="tdDiv">
                                                        <select class="form-control input-md m-bot15" id="ddlDealFail">
                                                            <option>Select</option>
                                                            <option>Yes</option>
                                                            <option>No</option>
                                                        </select>
                                                    </td>
                                                    <td style="text-align:center;">

                                                        <button type="button" class="btn btn-primary btn-xs" id="btnEdit" onclick="SaveEnquiryMaster(this)"><i class="fa fa-plus fa-lg"></i></button>

                                                    </td>

                                                </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                            </div>


                        </div>

                        <div class="pull-right" style="margin-right:15px">
                            @*<button type="button" class="btn btn-info" id="btnSave" style="margin-top:27px; width:100px" onclick="SaveEnquiryMaster()">Save</button>*@

                            @*<button type="button" class="btn btn-danger" id="btnDelete" style="margin-top:27px; width:100px" onclick="DeleteEnquiry()">Delete</button>

                                <button type="button" class="btn btn-default" id="btnCancel" style="margin-top:27px; width:100px" onclick="clearfeild()">Clear</button>

                                <a class="btn btn-primary" id="btnPrint" style="margin-top:25px;" href="#">Print</a>*@
                        </div>


                        <!--copy till this-->
                    </div>
                </div>
            </section>
        </div>
    </form>
    <!-- Lookup Modal Start -->
    <!-- Popup box modal start -->
    <div class="modal" id="section-message" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog animated bounceInDown">
            <div class="modal-content">
                <div class="modal-header" id="modalMessage">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Message</h4>
                </div>
                <div class="modal-body">

                    <h5 id="lblMessage"></h5>

                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal end -->
    <!-- Popup box modal start -->
    <div class="modal" id="section-confirm" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog animated bounceInDown">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Confirm</h4>
                </div>
                <div class="modal-body">

                    <h5>Are you sure want to save ?</h5>

                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                    <button class="btn btn-success" type="button" onclick="SaveMasterEnquiry()">Save</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal end -->
    <div class="modal" id="section-confirm-Delete" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog animated bounceInDown">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Confirm</h4>
                </div>
                <div class="modal-body">

                    <h5>Are you sure want to Delete ?</h5>

                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                    <button class="btn btn-danger" type="button" onclick="DeleteEnquiry()">Delete</button>
                </div>
            </div>
        </div>
    </div>

</section>

<link href='@Url.Content("~/assets/plugins/select2/select2.css")' rel="stylesheet" type="text/css" media="screen" />
<link href='@Url.Content("~/assets/plugins/icheck/skins/minimal/blue.css")' rel="stylesheet" type="text/css" media="screen" />
<script src='@Url.Content("~/assets/js/jquery-1.11.2.min.js")' type="text/javascript"></script>
<script src='@Url.Content("~/assets/plugins/select2/select2.min.js")' type="text/javascript"></script>
<script src='@Url.Content("~/assets/plugins/icheck/icheck.min.js")' type="text/javascript"></script>


<script>
    function RevClickDetails(EvaluationCode) {
        var EvaluationCode = EvaluationCode;
    }

    function SaveEnquiryMaster(value) {
        debugger
        $(value).closest('tr').find("#btnEdit").show();

        var lblEvaluationCode = $(value).closest('tr').find("#lblEvaluationCode").text().trim();

        debugger;
        var dto = {};

        if ($("#txtEvaluationNo").val() == "") {
            $("#modalMessage").css("background-color", "#e46457");
            $("#lblMessage").text("Please Select Evaluation: ")
            $("#section-message").modal('show');
            setTimeout(function () {
                $('#section-message').modal('hide')
            }, 4000);
            return;

        }
        if ($("#ddlDealFail").val() == "Yes") {
            dto.IsDealFail = 'Y';
        } else {
            dto.IsDealFail = 'N';

        }
        dto.DealerCode = "@Session["DealerCode"].ToString()";
        dto.EvaluationCode = lblEvaluationCode;
        $.ajax({

            dataType: "json",
            async: true,
            type: 'Get',
            url: '@Url.Content("~/EvaluationDetail/Insert_DealFail")',
            data: dto,

            success: function (data) {
                if (data) {
                    if (data.Success == true) {
                        $("#section-confirm").modal("hide")
                        $("#modalMessage").css("background-color", "#64c344");
                        $("#lblMessage").text(data.Message)
                        $("#section-message").modal('show');

                    }
                    else {
                        $("#section-confirm").modal("hide")
                        $("#modalMessage").css("background-color", "#e46457");
                        $("#lblMessage").text(data.Message)
                        $("#section-message").modal('show');
                    }
                }
            },
            complete: function () {

            },
            error: function (data) {
                $("#section-confirm").modal("hide")
                $("#modalMessage").css("background-color", "#e46457");
                $("#lblMessage").text(data.Message)
                $("#section-message").modal('show');
            }

        });
    }

</script>




