
@{
    ViewBag.Title = "EnquiryDetail";
    Layout = "~/Views/Shared/_LayoutV2.cshtml";
    string leadId = ViewBag.UrlLeadId;
}
<style>
    .makespace {
        margin-bottom: 20px;
    }

    .icheckbox_minimal-blue {
        top: 10px;
    }
    
    #productDetail:focus{
        border-color : red;
    }
    .mandatory{
        color: red;
    }
</style>

@*<link href='@Url.Content("~/assets/plugins/pace/pace-theme-flash.css")' rel="stylesheet" type="text/css" media="screen" />
<link href='@Url.Content("~/assets/plugins/bootstrap/css/bootstrap.min.css")' rel="stylesheet" type="text/css" />
<link href='@Url.Content("~/assets/plugins/bootstrap/css/bootstrap-theme.min.css")' rel="stylesheet" type="text/css" />
<link href='@Url.Content("~/assets/fonts/font-awesome/css/font-awesome.css")' rel="stylesheet" type="text/css" />
<link href='@Url.Content("~/assets/css/animate.min.css")' rel="stylesheet" type="text/css" />
<link href='@Url.Content("~/assets/plugins/perfect-scrollbar/perfect-scrollbar.css")' rel="stylesheet" type="text/css" />


<link href='@Url.Content("~/assets/plugins/jquery-ui/smoothness/jquery-ui.min.css")' rel="stylesheet" type="text/css" media="screen" />
<link href='@Url.Content("~/assets/plugins/datepicker/css/datepicker.css")' rel="stylesheet" type="text/css" media="screen" />

<link href='@Url.Content("~/assets/css/style.css")' rel="stylesheet" type="text/css" />
<link href='@Url.Content("~/assets/css/responsive.css")' rel="stylesheet" type="text/css" />*@

<section class="wrapper main-wrapper row" style=''>

    <div class='col-xs-12'>
        <div class="page-title">

            <div class="pull-left">
                <!-- PAGE HEADING TAG - START --><h1 class="title">Enquiry Detail</h1><!-- PAGE HEADING TAG - END -->
            </div>

            @*<div class="pull-right hidden-xs">
                    <ol class="breadcrumb">
                        <li>
                            <a href="index.html"><i class="fa fa-home"></i>Home</a>
                        </li>

                        <li class="active">
                            <strong>CRM Admin</strong>
                        </li>
                    </ol>
                </div>*@

        </div>
    </div>
    <div class="clearfix"></div>
    <!-- MAIN CONTENT AREA STARTS -->

    <form method="post">
        <!-- LEAD INFORMATION STARTS -->
        <div class="col-xs-12">
            <section class="box ">
                <header class="panel_header">
                    <h2 class="title pull-left">Lead Information</h2>
                    <div class="actions panel_actions pull-right">
                        <a class="box_toggle fa fa-chevron-down"></a>
                        @*<a class="box_setting fa fa-cog" data-toggle="modal" href="#section-settings"></a>*@
                    </div>
                    <input type="hidden" value="@leadId" id="txtLeadID" />
                    <input type="hidden" value="" id="txtProspectID" />
                </header>
                <div class="content-body">
                    <div class="row">
                        @*<div class="col-md-12 col-sm-10 col-xs-12">

                            </div>*@
                        <div class="col-md-4">
                            <label class="form-label">Lead ID</label>
                            <div class="input-group">
                                <span class="input-group-addon"><a id="IssueClick" data-toggle="modal" data-target="#EnquiryNoModal" style="color:blue"><i class="fa fa-search"></i></a></span>
                                <input type="text" class="form-control" id="txtEnquiry" readonly="readonly" onblur="ChangeColor(this)">
                                @*<span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-info"></i>
                                </span>
                                
                                @Html.DropDownList("txtEnquiry", new SelectList((IEnumerable<SelectListItem>)ViewBag.LeadId, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "txtEnquiry" })*@
                            </div>
                            <div class="makespace"></div>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Lead Date</label>
                            <div class="input-group controls">
                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                <input type="text" class="form-control datepicker" id="txtLeadDate" readonly data-start-view="1">
                            </div>
                            <div class="makespace"></div>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Interest <span class="mandatory">*</span></label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-info-circle"></i>
                                </span>
                                <select class="form-control m-bot15" id="ddlInterest" onchange="ChangeColor(this)">
                                    <option value="0">Select</option>
                                    <option value="1" selected>New</option>
                                    <option value="2">Used</option>
                                </select>
                            </div>
                            <div class="makespace"></div>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Lead Type <span class="mandatory">*</span></label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-info-circle"></i>
                                </span>
                                @Html.DropDownList("ddlLeadType", new SelectList((IEnumerable<SelectListItem>)ViewBag.LeadType, "Value", "Text", "LT/0004"), new { @class = "form-control m-bot15", @id = "ddlLeadType" , @onchange = "ChangeColor(this)"  })
                            </div>
                            <div class="makespace"></div>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Lead Mode/Through <span class="mandatory">*</span></label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-info-circle"></i>
                                </span>
                                @Html.DropDownList("ddlLeadMode", new SelectList((IEnumerable<SelectListItem>)ViewBag.LeadMode, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlLeadMode" , @onchange = "ChangeColor(this)" })
                            </div>
                            <div class="makespace"></div>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Lead Source <span class="mandatory">*</span></label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-info-circle"></i>
                                </span>
                                @Html.DropDownList("ddlLeadSource", new SelectList((IEnumerable<SelectListItem>)ViewBag.LeadSource, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlLeadSource", @onchange = "ChangeColor(this)" })
                            </div>
                            <div class="makespace"></div>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Vehicle Segment <span class="mandatory">*</span></label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-car"></i>
                                </span>
                                @Html.DropDownList("ddlLeadVehicleType", new SelectList((IEnumerable<SelectListItem>)ViewBag.VehicleSegments, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlLeadVehicleType" , @onchange = "ChangeColor(this)" })
                            </div>
                            <div class="makespace"></div>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Invoice Detail <span class="mandatory">*</span></label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-male"></i>
                                </span>
                                <select class="form-control m-bot15" id="ddlInvoiceDetail" onchange = "ChangeColor(this)">
                                    <option value="0">Select</option>
                                    <option value="1" selected>Self</option>
                                    <option value="2">Father</option>
                                    <option value="3">Uncle</option>
                                    <option value="4">Mother</option>
                                    <option value="5">Brother</option>
                                    <option value="6">Sister</option>
                                    <option value="7">Company</option>
                                </select>
                            </div>
                            <div class="makespace"></div>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Assign To <span class="mandatory">*</span></label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-users"></i>
                                </span>
                                @Html.DropDownList("ddlAssignTo", new SelectList((IEnumerable<SelectListItem>)ViewBag.AssignTo, "Value", "Text", Session["EmpCode"].ToString()), new { @class = "form-control m-bot15", @id = "ddlAssignTo", @onchange = "ChangeColor(this)" })
                            </div>
                            <div class="makespace"></div>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Subject</label>
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-clipboard"></i></span>
                                <input type="text" class="form-control" id="txtSubject">
                            </div>
                        </div>

                        <div class="col-md-1" style="width:4%;">
                            <label></label>
                            <div class="input-group">
                                <input tabindex="5" type="checkbox" id="checkBank" class="chkBank" style="position: absolute; opacity: 0;">
                            </div>
                            <div class="makespace"></div>
                        </div>



                        <div class="col-md-3" style="width:29.6%;">
                            <label class="form-label">Finance Bank</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span> <i class="fa fa-bank"></i>
                                </span>
                                @Html.DropDownList("ddlBank", new SelectList((IEnumerable<SelectListItem>)ViewBag.Bank, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlBank", @disabled = "disabled" })
                            </div>
                            <div class="makespace"></div>
                        </div>
                        

                        @*<div class="col-md-4">
                                <label class="form-label">Assign To Branch</label>
                                <div class="input-group">
                                    <span class="input-group-addon">
                                        <span class="arrow"></span>
                                        <i class="fa fa-link"></i>
                                    </span>
                                    <select class="form-control m-bot15" id="ddlAssignToBranch">
                                        <option value="0">Select</option>
                                    </select>
                                </div>
                            </div>*@

                        

                        <div class="col-md-1" style="width:4%;">
                            <label></label>
                            <div class="input-group">
                                @*<input  type="checkbox" id="chkIsEmail" style="position: absolute; opacity: 0;">*@
                                @Html.CheckBox("chkIsEmail",false, new { onclick = "getEmail();" })
                            </div>
                            <div class="makespace"></div>
                        </div>

                        <div class="col-md-3" style="width:28.6%;">
                            <label class="form-label">Email</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-bank"></i>
                                </span>
                                <input type="text" class="form-control" id="txtEmail">
                            </div>
                            <div class="makespace"></div>
                        </div>
                        


                        <!-- ROW AREA ENDS -->
                    </div>
                </div>
            </section>
        </div>
        <!-- LEAD INFORMATION ENDDS -->
        <!-- CUSTOMER INFORMATION STARTS -->
        <div class="col-xs-12 col-md-8 col-lg-8">
            <section class="box ">
                <header class="panel_header">
                    <h2 class="title pull-left">Customer Information</h2>
                    <div class="actions panel_actions pull-right">
                        <a class="box_toggle fa fa-chevron-down"></a>
                        @*<a class="box_setting fa fa-cog" data-toggle="modal" href="#section-settings"></a>*@
                    </div>
                </header>
                <div class="content-body">
                    <!--starts here-->
                        @*<div class="row">
                            <div class="col-xs-12">
                                <div class="panel-group" id="accordion">
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h4 class="panel-title">
                                                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                                                    @*<span class="glyphicon glyphicon-plus"></span>
                                                    <span class="glyphicon glyphicon-chevron-right"></span>
                                                    Customer Information
                                                </a>
                                            </h4>
                                        </div>
                                        <div id="collapseOne" class="panel-collapse collapse">
                                            <div class="panel-body">*@
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label class="form-label">Pre-Customer ID</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <span class="arrow"></span>
                                                                <i class="fa fa-info"></i>
                                                            </span>
                                                            @Html.DropDownList("ddlCustomerId", new SelectList((IEnumerable<SelectListItem>)ViewBag.Customers, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlCustomerId" })
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label class="form-label">Title</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon"><i class="fa fa-male"></i></span>
                                                            <select class="form-control m-bot15" id="ddlTitle">
                                                                <option value="0" selected>Mr.</option>
                                                                <option value="1">Ms.</option>
                                                                <option value="2">Mrs.</option>
                                                                <option value="3">M/S</option>
                                                            </select>
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label class="form-label">Name <span class="mandatory">*</span></label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <span class="arrow"></span>
                                                                <i class="fa fa-user"></i>
                                                            </span>
                                                            <input type="text" required class="form-control" id="txtCustName" maxlength="100" onblur="ChangeColor(this)">
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label class="form-label">Email</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <span class="arrow"></span>
                                                                <i class="fa fa-envelope"></i>
                                                            </span>
                                                            <input type="email" class="form-control" id="txtCustEmail" required maxlength="100">
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label class="form-label">Contact Person</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <span class="arrow"></span>
                                                                <i class="fa fa-user-md"></i>
                                                            </span>
                                                            <input type="text" class="form-control" id="txtCustContactPerson" >
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <label class="form-label">Date Of Birth</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                            <input type="text" class="form-control datepicker" id="txtDOB" readonly >
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label class="form-label">Cell No. <span class="mandatory">*</span></label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <span class="arrow"></span>
                                                                <i class="fa fa-phone"></i>
                                                            </span>
                                                            <input type="tel" required class="form-control" id="txtCustCellNo" maxlength="12" onblur="ChangeColor(this)">
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <label class="form-label">Phone No.</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <span class="arrow"></span>
                                                                <i class="fa fa-phone-square"></i>
                                                            </span>
                                                            <input type="tel" class="form-control" id="txtCustPhone" maxlength="12">
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label class="form-label">Address</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <span class="arrow"></span>
                                                                <i class="fa fa-book"></i>
                                                            </span>
                                                            <input type="text" class="form-control" id="txtCustAddress">
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <label class="form-label">NTN/NIC</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <span class="arrow"></span>
                                                                <i class="fa fa-calculator"></i>
                                                            </span>
                                                            <input type="text" class="form-control" id="txtCustNTN" maxlength="20">
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label class="form-label">Country</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <span class="arrow"></span>
                                                                <i class="fa fa-flag-o"></i>
                                                            </span>
                                                            @Html.DropDownList("ddlCustCountry", new SelectList((IEnumerable<SelectListItem>)ViewBag.Country, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlCustCountry" })
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <label class="form-label">City <span class="mandatory">*</span></label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon"><i class="fa fa-home"></i></span>
                                                            @Html.DropDownList("ddlCustCity", new SelectList((IEnumerable<SelectListItem>)ViewBag.City, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlCustCity", @onchange = "ChangeColor(this)"})
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label class="form-label">Education</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <span class="arrow"></span>
                                                                <i class="fa fa-calculator"></i>
                                                            </span>
                                                            <input type="text" class="form-control" id="txtEducation" maxlength="20">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label class="form-label">Url</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <span class="arrow"></span>
                                                                <i class="fa fa-book"></i>
                                                            </span>
                                                            <input type="text" class="form-control" id="txtCustAddress">
                                                        </div>
                                                    </div>
                                                </div>
                                            @*</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>*@
                    <!--ends hre-->
                    <div class="row">
                        @*<div class="col-md-12 col-sm-10 col-xs-12">

                            </div>*@
                        @*<div class="col-md-6">
                            <label class="form-label">Pre-Customer ID</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-info"></i>
                                </span>
                                @Html.DropDownList("ddlCustomerId", new SelectList((IEnumerable<SelectListItem>)ViewBag.Customers, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlCustomerId" })
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        @*<div class="col-md-6">
                            <label class="form-label">Salutation*</label>
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-male"></i></span>
                                <select class="form-control m-bot15" id="ddlSalutaion">
                                    <option value="0">Mr.</option>
                                    <option value="1">Ms.</option>
                                    <option value="2">Mrs.</option>
                                    <option value="3">M/S</option>
                                </select>
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        @*<div class="col-md-6">
                            <label class="form-label">Name*</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-user"></i>
                                </span>
                                <input type="text" required class="form-control" id="txtCustName" maxlength="100">
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        @*<div class="col-md-6">
                            <label class="form-label">Email*</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-envelope"></i>
                                </span>
                                <input type="email" class="form-control" id="txtCustEmail" required maxlength="100">
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        @*<div class="col-md-6">
                            <label class="form-label">Contact Person</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-user-md"></i>
                                </span>
                                <input type="text" class="form-control" id="txtCustContactPerson">
                            </div>
                            <div class="makespace"></div>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Date Of Birth</label>
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                <input type="text" class="form-control datepicker" id="txtDOB" readonly>
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        @*<div class="col-md-6">
                            <label class="form-label">Cell No.*</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-phone"></i>
                                </span>
                                <input type="tel" required class="form-control" id="txtCustCellNo" maxlength="12">
                            </div>
                            <div class="makespace"></div>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Phone No.</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-phone-square"></i>
                                </span>
                                <input type="tel" class="form-control" id="txtCustPhone" maxlength="12">
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        @*<div class="col-md-6">
                            <label class="form-label">Address</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-book"></i>
                                </span>
                                <input type="text" class="form-control" id="txtCustAddress">
                            </div>
                            <div class="makespace"></div>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">NTN</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-calculator"></i>
                                </span>
                                <input type="text" class="form-control" id="txtCustNTN" maxlength="20">
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        @*<div class="col-md-6">
                            <label class="form-label">Country</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-flag-o"></i>
                                </span>
                                @Html.DropDownList("ddlCustCountry", new SelectList((IEnumerable<SelectListItem>)ViewBag.Country, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlCustCountry" })
                            </div>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">City</label>
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-home"></i></span>
                                @Html.DropDownList("ddlCustCity", new SelectList((IEnumerable<SelectListItem>)ViewBag.City, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlCustCity" })
                            </div>
                        </div>*@
                        @*<div class="col-md-6">
                            <label class="form-label">Education</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-calculator"></i>
                                </span>
                                <input type="text" class="form-control" id="txtCustNTN" maxlength="20">
                            </div>
                            <div class="makespace"></div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Url</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <span class="arrow"></span>
                                    <i class="fa fa-book"></i>
                                </span>
                                <input type="text" class="form-control" id="txtCustAddress">
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        <!-- ROW AREA ENDS -->
                    </div>
                </div>
            </section>
        </div>
        <!-- CUSTOMER INFORMATION ENDS -->
        <!-- WORK INFORMATION STARTS -->
        <div class="col-xs-12 col-md-4 col-lg-4">
            <section class="box ">
                <header class="panel_header">
                    <h2 class="title pull-left">Work Information</h2>
                    <div class="actions panel_actions pull-right">
                        <a class="box_toggle fa fa-chevron-down"></a>
                        @*<a class="box_setting fa fa-cog" data-toggle="modal" href="#section-settings"></a>*@
                    </div>
                </header>
                <div class="content-body">
                    <!--starts here-->
                        @*<div class="row">
                            <div class="col-xs-12">
                                <div class="panel-group" id="accordion">
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h4 class="panel-title">
                                                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                                                    @*<span class="glyphicon glyphicon-plus"></span>
                                                    <span class="glyphicon glyphicon-chevron-right"></span>
                                                    Work Information
                                                </a>
                                            </h4>
                                        </div>
                                        <div id="collapseTwo" class="panel-collapse collapse">
                                            <div class="panel-body">*@
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label class="form-label">Company</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-building"></i>
                                                            </span>
                                                            <input type="text" class="form-control" id="txtCompany" maxlength="50">
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>
                                                    <div class="col-md-12">
                                                        <label class="form-label">Profession</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-building"></i>
                                                            </span>
                                                            @*<select class="form-control m-bot15" id="ddlSalutaion">
                                                                <option value="0">Select</option>
                                                                <option value="1">Doctor</option>
                                                                <option value="2">Software Engineer</option>
                                                            </select>*@
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>
                                                    <div class="col-md-12">
                                                        <label class="form-label">Designation</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon"><i class="fa fa-briefcase"></i></span>
                                                            <input type="text" class="form-control" id="txtDesigntaion" maxlength="30">
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>

                                                    <div class="col-md-12">
                                                        <label class="form-label">Department</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-edit"></i>
                                                            </span>
                                                            <input type="text" class="form-control" id="txtDepartment" maxlength="20">
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <label class="form-label">Office No.</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-phone"></i>
                                                            </span>
                                                            <input type="tel" class="form-control" id="txtOfficeNo" maxlength="12">
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label></label>
                                                        <input type="text" class="form-control" placeholder="EXT" id="txtOfficeNoExt" style="margin-top: 5px;" maxlength="5">
                                                    </div>

                                                    <div class="col-md-12">
                                                        <label class="form-label">Address</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-book"></i>
                                                            </span>
                                                            <input type="text" class="form-control" id="txtWorkAddress">
                                                        </div>
                                                        <div class="makespace"></div>
                                                    </div>

                                                    <div class="col-md-12">
                                                        <label class="form-label">City</label>
                                                        <div class="input-group">
                                                            <span class="input-group-addon"><i class="fa fa-home"></i></span>
                                                            @Html.DropDownList("ddlWorkCity", new SelectList((IEnumerable<SelectListItem>)ViewBag.City, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlWorkCity" })
                                                        </div>
                                                    </div>
                                                </div>
                                            @*</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>*@
                    <!--ends here-->
                    <div class="row">
                        @*<div class="col-md-12 col-sm-10 col-xs-12">

                            </div>*@
                        @*<div class="col-md-12">
                            <label class="form-label">Company</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-building"></i>
                                </span>
                                <input type="text" class="form-control" id="txtCompany" maxlength="50">
                            </div>
                            <div class="makespace"></div>
                        </div>*@
                        @*<div class="col-md-12">
                            <label class="form-label">Profession</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-building"></i>
                                </span>
                                <select class="form-control m-bot15" id="ddlSalutaion">
                                    <option value="0">Doctor</option>
                                    <option value="1">Software Engineer</option>
                                </select>
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        @*<div class="col-md-12">
                            <label class="form-label">Designtaion</label>
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-briefcase"></i></span>
                                <input type="text" class="form-control" id="txtDesigntaion" maxlength="30">
                            </div>
                            <div class="makespace"></div>
                        </div>

                        <div class="col-md-12">
                            <label class="form-label">Department</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-edit"></i>
                                </span>
                                <input type="text" class="form-control" id="txtDepartment" maxlength="20">
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        @*<div class="col-md-8">
                            <label class="form-label">Office No.</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-phone"></i>
                                </span>
                                <input type="tel" class="form-control" id="txtOfficeNo" maxlength="12">
                            </div>
                            <div class="makespace"></div>
                        </div>
                        <div class="col-md-4">
                            <label></label>
                            <input type="text" class="form-control" placeholder="EXT" id="txtOfficeNoExt" style="margin-top: 5px;" maxlength="5">
                        </div>

                        <div class="col-md-12">
                            <label class="form-label">Address</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-book"></i>
                                </span>
                                <input type="text" class="form-control" id="txtWorkAddress">
                            </div>
                            <div class="makespace"></div>
                        </div>

                        <div class="col-md-12">
                            <label class="form-label">City</label>
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-home"></i></span>
                                @Html.DropDownList("ddlWorkCity", new SelectList((IEnumerable<SelectListItem>)ViewBag.City, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlWorkCity" })
                            </div>
                        </div>*@

                        <!-- ROW AREA ENDS -->
                    </div>
                </div>
            </section>
        </div>
        <!-- WORK INFORMATION ENDS -->
        <!-- PRODUCT INFORMATION STARTS -->
        <div class="col-xs-12">
            <section class="box ">
                <header class="panel_header">
                    <h2 class="title pull-left">Product Information</h2>
                    <div class="actions panel_actions pull-right">
                        <a class="box_toggle fa fa-chevron-down"></a>
                        @*<a class="box_setting fa fa-cog" data-toggle="modal" href="#section-settings"></a>*@
                    </div>
                </header>
                <div class="content-body">
                    <!--starts here-->
                    <div class="row">
                        <div class="col-xs-12">
                            @*<div class="panel-group" id="accordion">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h4 class="panel-title">
                                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
                                                @*<span class="glyphicon glyphicon-plus"></span>
                                                <span class="glyphicon glyphicon-chevron-right"></span>
                                                Product Information
                                            </a>
                                        </h4>
                                    </div>
                                    <div id="collapseThree" class="panel-collapse collapse">
                                        <div class="panel-body">*@
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label class="form-label">Brand Code</label>
                                                    <div class="input-group">
                                                        <span class="input-group-addon"><i class="fa fa-globe"></i></span>
                                                        @Html.DropDownList("ddlBrandCode", new SelectList((IEnumerable<SelectListItem>)ViewBag.BrandCode, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlBrandCode" })
                                                    </div>
                                                    <div class="makespace"></div>
                                                </div>

                                                <div class="col-md-3">
                                                    <label class="form-label">Product Code</label>
                                                    <div class="input-group">
                                                        <span class="input-group-addon"><i class="fa fa-car"></i></span>
                                                        @Html.DropDownList("ddlProdCode", new SelectList((IEnumerable<SelectListItem>)ViewBag.ProdCode, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlProdCode" })
                                                    </div>
                                                    <div class="makespace"></div>
                                                </div>
                                                <div class="col-md-3" >
                                                    <label class="form-label">Version/Model</label>
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <i class="fa fa-sitemap"></i>
                                                        </span>
                                                        <input type="text" class="form-control" id="txtVersion">
                                                    </div>
                                                    <div class="makespace"></div>
                                                </div>

                                                <div class="col-md-3">
                                                    <label class="form-label">Color</label>
                                                    <div class="input-group">
                                                        <span class="input-group-addon"><i class="fa fa-pie-chart"></i></span>
                                                        @Html.DropDownList("ddlColor", new SelectList((IEnumerable<SelectListItem>)ViewBag.Color, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlColor" })
                                                    </div>
                                                    <div class="makespace"></div>
                                                </div>

                                                <div class="col-md-3">
                                                    <label class="form-label">Priority</label>
                                                    <div class="input-group">
                                                        <span class="input-group-addon"><i class="fa fa-bullhorn"></i></span>
                                                        @Html.DropDownList("ddlPriority", new SelectList((IEnumerable<SelectListItem>)ViewBag.Priority, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlPriority" })
                                                    </div>
                                                    <div class="makespace"></div>
                                                </div>

                                                <div class="col-md-3">
                                                    <label class="form-label">Quantity</label>
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <i class="fa fa-filter"></i>
                                                        </span>
                                                        <input type="number" class="form-control" id="txtQuantity">
                                                    </div>
                                                    <div class="makespace"></div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="input-group" style="width:100%;">
                                                        <button class="btn btn-success btn-sm" type="button" style="margin-top: 28px;width: 100%;padding: 8px;" onclick="AddProduct(this)">
                                                            <i class="fa fa-plus fa-2x"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="table-responsive">
                                                        <table class="table table-bordered table-striped" id="productDetail">
                                                            <thead>
                                                                <tr>
                                                                    <th>#</th>
                                                                    <th>Brand</th>
                                                                    <th>Product</th>
                                                                    <th>Version</th>
                                                                    <th>Color</th>
                                                                    <th>Priority</th>
                                                                    <th>Quantity</th>
                                                                    <th>Remove</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                
                                                                    @*<td>1</td>
                            <td>Suzuki</td>
                            <td>Mehran</td>
                            <td>Sedan</td>
                            <td>White</td>
                            <td>High</td>
                            <td>2</td>
                            <td>Call</td>
                            <td>09-Feb-2018</td>
                            <td style="text-align:center;"><button class="btn btn-danger btn-xs"><i class="fa fa-minus fa-lg"></i></button></td>*@
                                                                
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        @*</div>
                                    </div>
                                </div>
                            </div>*@
                        </div>
                    </div>
                    <!--ends here -->
                    <div class="row">
                        @*<div class="col-md-12 col-sm-10 col-xs-12">

                            </div>*@
                        @*<div class="col-md-3">
                            <label class="form-label">Brand Code</label>
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-globe"></i></span>
                                @Html.DropDownList("ddlBrandCode", new SelectList((IEnumerable<SelectListItem>)ViewBag.BrandCode, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlBrandCode" })
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        @*<div class="col-md-3">
                            <label class="form-label">Product Code</label>
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-car"></i></span>
                                @Html.DropDownList("ddlProdCode", new SelectList((IEnumerable<SelectListItem>)ViewBag.ProdCode, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlProdCode" })
                            </div>
                            <div class="makespace"></div>
                        </div>*@
                        @*<div class="col-md-3">
                            <label class="form-label">Version</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-sitemap"></i>
                                </span>
                                <input type="number" class="form-control" id="txtQuantity">
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        @*<div class="col-md-3">
                            <label class="form-label">Color</label>
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-pie-chart"></i></span>
                                @Html.DropDownList("ddlColor", new SelectList((IEnumerable<SelectListItem>)ViewBag.Color, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlColor" })
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        @*<div class="col-md-3">
                            <label class="form-label">Priority</label>
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-bullhorn"></i></span>
                                @Html.DropDownList("ddlPriority", new SelectList((IEnumerable<SelectListItem>)ViewBag.Priority, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlPriority" })
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        @*<div class="col-md-3">
                            <label class="form-label">Quantity</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-filter"></i>
                                </span>
                                <input type="number" class="form-control" id="txtQuantity">
                            </div>
                            <div class="makespace"></div>
                        </div>*@
                        @*<div class="col-md-3">
                            <div class="input-group" style="width:100%;">
                                <button class="btn btn-success btn-sm" type="button" style="margin-top: 28px;width: 100%;padding: 8px;" onclick="AddProduct(this)">
                                    <i class="fa fa-plus fa-2x"></i>
                                </button>
                            </div>
                        </div>*@

                        
                        <!-- ROW AREA ENDS -->
                    </div>
                </div>
            </section>
        </div>
        <!-- PRODUCT INFORMATION ENDS -->
        <!--countrmeasure starts-->
        <div class="col-xs-12">
            <section class="box ">
                <header class="panel_header">
                    <h2 class="title pull-left">Follow Up</h2>
                    <div class="actions panel_actions pull-right">
                        <a class="box_toggle fa fa-chevron-down"></a>
                        @*<a class="box_setting fa fa-cog" data-toggle="modal" href="#section-settings"></a>*@
                    </div>
                </header>
                <div class="content-body">
                    <!--starts here-->
                    <div class="row">
                        <div class="col-xs-12">
                            @*<div class="panel-group" id="accordion">
                                <div class="panel panel-default">*@
                                    @*<div class="panel-heading">
                                        <h4 class="panel-title">
                                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseFour">
                                                @*<span class="glyphicon glyphicon-plus"></span>
                                                <span class="glyphicon glyphicon-chevron-right"></span>
                                                Follow Up
                                            </a>
                                        </h4>
                                    </div>*@
                                    @*<div id="collapseFour" class="panel-collapse collapse">
                                        <div class="panel-body">*@
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label class="form-label">Next Action</label>
                                                    <div class="input-group">
                                                        <span class="input-group-addon"><i class="fa fa-home"></i></span>
                                                        @Html.DropDownList("ddlFurtherContact", new SelectList((IEnumerable<SelectListItem>)ViewBag.FurtherContact, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlFurtherContact" })
                                                    </div>
                                                    <div class="makespace"></div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label">Status</label>
                                                    <div class="input-group">
                                                        <span class="input-group-addon"><i class="fa fa-check"></i></span>
                                                        @Html.DropDownList("ddlStatusType", new SelectList((IEnumerable<SelectListItem>)ViewBag.StatusType, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlStatusType" })
                                                        @*<select class="form-control m-bot15" id="ddlSalutaion">
                                                            <option value="0">Select</option>
                                                        </select>*@
                                                    </div>
                                                    <div class="makespace"></div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label">Followup Date</label>
                                                    <div class="input-group">
                                                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                        <input type="text" class="form-control datepicker" id="txtFurtherDate" readonly>
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label">Followup Time</label>
                                                    <div class="input-group control">
                                                        <span class="input-group-addon"><i class="fa fa-clock-o"></i></span>
                                                        <input type="text" class="form-control timepicker" id="txtFurtherTime"
                                                               data-template="dropdown" data-show-seconds="true" data-default-time="09:00 AM"
                                                               data-show-meridian="true" data-minute-step="5" readonly>
                                                    </div>
                                                </div>
                                                <div class="col-md-9">
                                                    <label class="form-label">Comments</label>
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <i class="fa fa-comments"></i>
                                                        </span>
                                                        <input type="text" class="form-control" id="txtComments">
                                                    </div>
                                                    <div class="makespace"></div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="input-group" style="width:100%;">
                                                        <button class="btn btn-success btn-sm" id="btnAddData" type="button" style="margin-top: 28px;width: 100%;padding: 8px;" onclick="AddFollowUp(this)">
                                                            <i class="fa fa-plus fa-2x"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="table-responsive">
                                                        <table class="table table-bordered table-striped" id="followupDetail">
                                                            <thead>
                                                                <tr>
                                                                    <th>#</th>
                                                                    <th>Next Action</th>
                                                                    <th>Status</th>
                                                                    <th>Followup Date</th>
                                                                    <th>Followup Time</th>
                                                                    <th>Comments</th>
                                                                    <th>Action</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                
                                                                    @*<td>1</td>
                                <td>Suzuki</td>
                                <td>Mehran</td>
                                <td>Sedan</td>
                                <td>White</td>
                                <td>High</td>
                                <td>2</td>
                                <td>Call</td>
                                <td>09-Feb-2018</td>
                                <td style="text-align:center;"><button class="btn btn-danger btn-xs"><i class="fa fa-minus fa-lg"></i></button></td>*@
                                                                
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>

                                            </div>
                                        @*</div>
                                    </div>
                                </div>
                            </div>*@
                        </div>
                    </div>
                    <!--ends here-->
                    <div class="row">
                        @*<div class="col-md-12 col-sm-10 col-xs-12">

                        </div>*@
                        @*<div class="col-md-3">
                            <label class="form-label">Next Action</label>
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-home"></i></span>
                                @Html.DropDownList("ddlFurtherContact", new SelectList((IEnumerable<SelectListItem>)ViewBag.FurtherContact, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlFurtherContact" })
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        @*<div class="col-md-3">
                            <label class="form-label">Status</label>
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-check"></i></span>
                                @Html.DropDownList("ddlStatusType", new SelectList((IEnumerable<SelectListItem>)ViewBag.StatusType, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlStatusType" })
                                <select class="form-control m-bot15" id="ddlSalutaion">
                                    <option value="0">Select</option>
                                </select>
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        @*<div class="col-md-3">
                            <label class="form-label">Followup Date</label>
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                <input type="text" class="form-control datepicker" id="txtFurtherDate" readonly>
                            </div>
                        </div>*@

                        @*<div class="col-md-3">
                            <label class="form-label">Followup Time</label>
                            <div class="input-group control">
                                <span class="input-group-addon"><i class="fa fa-clock-o"></i></span>
                                <input type="text" class="form-control timepicker" id="txtFurtherTime"
                                       data-template="dropdown" data-show-seconds="true" data-default-time="09:45 AM"
                                       data-show-meridian="true" data-minute-step="5" readonly>
                            </div>
                        </div>*@

                        @*<div class="col-md-9">
                            <label class="form-label">Comments</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-comments"></i>
                                </span>
                                <input type="text" class="form-control" id="txtComments">
                            </div>
                            <div class="makespace"></div>
                        </div>*@

                        @*<div class="col-md-3">
                            <div class="input-group" style="width:100%;">
                                <button class="btn btn-success btn-sm" id="btnAddData" type="button" style="margin-top: 28px;width: 100%;padding: 8px;" onclick="AddProduct(this)">
                                    <i class="fa fa-plus fa-2x"></i>
                                </button>
                            </div>
                        </div>*@

                        <!-- ROW AREA ENDS -->
                    </div>

                    <div id="LostArea" style="display:none;">
                        <div class="row">

                            <div class="col-md-4">
                                <label class="form-label">Lost Reason</label>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="fa fa-home"></i></span>
                                    @*@Html.DropDownList("ddlLostReason", new SelectList((IEnumerable<SelectListItem>)ViewBag.LostReason, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlLostReason" })*@
                                    <select class="form-control m-bot15" id="ddlSalutaion">
                                        <option value="0">Select</option>
                                    </select>
                                </div>
                                <div class="makespace"></div>
                            </div>

                            <div class="col-md-4">
                                <label class="form-label">Lost Date</label>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                    <input type="text" class="form-control datepicker" id="txtLostDate" readonly>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <label class="form-label">Comments</label>
                                <div class="input-group">
                                    <span class="input-group-addon">
                                        <i class="fa fa-comments"></i>
                                    </span>
                                    <input type="text" class="form-control" id="txtLostComments">
                                </div>
                                <div class="makespace"></div>
                            </div>

                        </div>
                    </div>

                    

                </div>
            </section>
        </div>
        <!--cuntermeaure ends-->
        <div class="col-xs-12">
            <section class="box ">
                <div class="content-body">
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="pull-left">
                                <button type="reset" class="btn btn-default" id="btnCancel" style="margin-top:25px;">Cancel</button>
                            </div>
                            <div class="pull-right">
                                <button type="button" class="btn btn-primary" id="btnSave" style="margin-top:25px;">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </form>
    <!-- Popup box modal start -->
    <div class="modal" id="section-confirm" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog animated bounceInDown">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Confirm</h4>
                </div>
                <div class="modal-body">

                    <h5>Are you sure want to save ?</h5>

                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                    <button class="btn btn-success" type="button" onclick="SaveForm()">Save</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal end -->
    <!-- Popup box modal start -->
    <div class="modal" id="section-message" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog animated bounceInDown">
            <div class="modal-content">
                <div class="modal-header" id="modalMessage">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Alert Message</h4>
                </div>
                <div class="modal-body">

                    <h5 id="lblMessage"></h5>

                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal end -->
    <!-- MAIN CONTENT AREA ENDS -->
    <!-- Enquiry No Modal Start -->
    <div class="modal" tabindex="-1" id="EnquiryNoModal" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" style="margin-top:60px;">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="modal123Label">Enquiries</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group row">
                        <label for="exampleInputuname" class="col-md-2">Search :</label>
                        <div class="col-md-10">
                            <input type="text" id="EnquirySearch" class="form-control" aria-controls="EnquiryTable" placeholder="Search . . . ">
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="table-responsive" style="height:300px;">
                            <table id="EnquiryTable" class="table table-striped table-hover responsive">
                                <thead>
                                    <tr>
                                        <th>Sr</th>
                                        <th>Enquiry No</th>
                                        <th>Enquiry Date</th>
                                        <th>Customer</th>
                                    </tr>
                                </thead>
                                <tbody style="font-size:12px; text-transform: uppercase">
                                    @{ int i = 1; }
                                    @if (ViewBag.Enquires != null)
                                    {

                                        foreach (var item in ViewBag.Enquires)
                                        {
                                            <tr style="text-align: left" onclick="EnqNo(this)">
                                                <td> @i</td> @{ i++; }
                                                <td class="tdDiv">
                                                    <label id="lblEnqNo">@item.Enquiry_ID</label><input type="hidden" id="hdnEnqNo" value="@item.Enquiry_ID" />                                                
                                                </td>
                                                <td class="tdDiv">
                                                    <label id="lblEnqDate">@item.EnqDate</label>
                                                </td>
                                                <td class="tdDiv">
                                                    <label id="lblCustomer">@item.Name</label>
                                                </td>
                                                @*<td class="tdDiv">
                                                    <a href="#" style="color:black">@item.ProdDesc</a>
                                                </td>
                                                <td class="tdDiv">
                                                    <a href="#" style="color:black">@item.TransType</a>
                                                </td>*@
                                            </tr>
                                                        }
                                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" style="text-transform: uppercase;" class="btn btn-danger waves-effect text-left" data-dismiss="modal">Close</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- Enquiry No Modal End -->
</section>


<script src='@Url.Content("~/assets/js/jquery-1.11.2.min.js")' type="text/javascript"></script>
<script src='@Url.Content("~/assets/plugins/icheck/icheck.min.js")' type="text/javascript"></script>
<link href='@Url.Content("~/assets/plugins/icheck/skins/minimal/blue.css")' rel="stylesheet" type="text/css" media="screen" />


<script>
    var checkBank = false;

    $(function () {
        $(".datepicker").datepicker({
            changeYear: true,
            changeMonth: true,
            yearRange: "-30:+1",
            dateFormat: "dd-mm-yy"
        });
    });

    function underAgeValidate(birthday) {
        debugger
        // it will accept two types of format yyyy-mm-dd and yyyy/mm/dd
        //var optimizedBirthday = birthday;
        var optimizedBirthday = birthday.slice(6, 10)

        //set date based on birthday at 01:00:00 hours GMT+0100 (CET)
        //var myBirthday = new Date(optimizedBirthday);

        // set current day on 01:00:00 hours GMT+0100 (CET)
        var currentDate = new Date().toJSON().slice(0, 4);

        // calculate age comparing current date and birthday

        var myAge = (currentDate - optimizedBirthday);
        //var myAge = ~~((Date.now(currentDate) - myBirthday) / (31557600000));

        if (myAge < 18) {
            return false;
        } else {
            return true;
        }

    }

    $(document).ready(function () {

        $("#txtEnquiry").val();
        $("#ddlCustomerId").val(0);
        
        

        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth() + 1; //January is 0!
        var yyyy = today.getFullYear();
        //(d.getHours() < 10 ? '0' : '') + d.getHours()
        var hr = (today.getHours() > 12 ? today.getHours() - 12 : '');
        var mn = today.getMinutes();

        var time;
        if (today.getHours() > 12)
            time = hr + ':' + mn + "PM";
        else
            time = hr + ':' + mn + "AM";


        $("#txtFurtherTime").val(time);

        if (dd < 10) {
            dd = '0' + dd
        }

        if (mm < 10) {
            mm = '0' + mm
        }

        today = dd + '-' + mm + '-' + yyyy;
        $("#txtLeadDate").val(today);
        //$("#txtFurtherDate").val(today);

        $("input[type='checkbox'], input[type='radio']").iCheck({
            checkboxClass: 'icheckbox_minimal-blue',
            radioClass: 'iradio_minimal-blue'
        });

        $('.chkBank').on('ifClicked', function (ev) {

            checkBank = $('input.chkBank').is(':checked'); //$('.chkBank').iCheck('update')[0].checked;

            if (checkBank == true) {
                $("#ddlBank").prop("disabled", true);
            }
            else {
                $("#ddlBank").prop("disabled", false);
            }
        })

        $("#ddlCustCountry").val("PAK");

        var leadid = $("#txtLeadID").val();
         

        if(leadid != "" && leadid != null)
        {
            getData(leadid);
            $("#txtEnquiry").val(leadid);
        }


        $('#chkIsEmail').on('ifClicked', function (ev) {

            $.ajax({
                dataType: "json",
                async: true,
                type: 'GET',
                url: '@Url.Content("~/Enquiry/GetEmailAddress")',
                success: function (data) {
                     
                    if (data.Success == true) {                        
                        $("#txtEmail").val(data.Response);
                    }
                },
                complete: function () {

                },

            });
        })

    })

    function getEmail(){

         
        $("#txtEmail").val("A");
    }


    $("#btnSave").click(function () {

        if (!PageValidation()) {
            return false;
        }

         
        var dob = $("#txtDOB").val()

        if (dob != "") {
            if (!underAgeValidate(dob)) {
                $("#txtDOB").focus();
                $("#section-confirm").modal("hide");
                $("#lblMessage").text("DOB should be grater then current date atleast 18 years");
                $("#section-message").modal("show");
                return false;
            }

        }

        

        $("#section-confirm").modal("show");
    })


    $("#ddlBrandCode").change(function () {
        var brandCode = $("#ddlBrandCode").val();
        if (brandCode == "0") {
            location.reload();
        } else {
            getProduct(brandCode);

        }
    });

    function getProduct(id) {
        var leadId = id;
        var dealerCode = "@Session["DealerCode"].ToString()";
         
        if (leadId != "0") {
            $.ajax({
                dataType: "json",
                async: true,
                type: 'GET',
                url: '@Url.Content("~/Event/Select_BrandProduct")',
                data: { 'EnquiryId': leadId, 'DealerCode': dealerCode },
                success: function (data) {

                    if (data.Success == true) {
                        //var items = JSON.parse(data.Response)

                        //$("#ddlProdCode").val(item[0].ProdCode.trim());
                        $("#ddlProdCode").find('option').remove();

                        // next iterate thru your object adding each option to the drop down\
                        $(data.Response).each(function (index, item) { // GETTING ERROR HERE
                            $("#ddlProdCode").append($('<option value=' + item.Value + ' >' + item.Text + '</option>'));
                        });

                    }
                },
                complete: function () {

                },
            });
        }
    }

    $("#ddlProdCode").change(function () {
        debugger 
        var skillsSelect = document.getElementById("ddlProdCode");
        var selectedText = skillsSelect.options[skillsSelect.selectedIndex].text;

        var prodCode = $("#ddlProdCode").val();

        var version = selectedText.split('|', selectedText.length);

        $("#txtVersion").val(version[1].trim());

    });

    $("#btnCancel").click(function () {
        $("#productDetail tbody tr").remove();
        $("#followupDetail tbody tr").remove();
        
        rowCount = 0;
        dataCount = 0;

    })


    function AddProduct(value)
    {
        var row = $('#productDetail >tbody  >tr').length;
        if (row > 0) {
            $("#productDetail").css("border-color", "#ccc");
        }
        var rowCount = 1;
        var dataCount = 1;
        var SNo = 1;
         
        var check = ValidateProductDetails();
        if (check == true) {
            var brand = $("#ddlBrandCode :selected").text();
            var brandCode = $("#ddlBrandCode").val(); $("#ddlBrandCode").css("border-color", "#ccc");

            var prodCode = $("#ddlProdCode").val();
            var prodDesc = $("#ddlProdCode :selected").text();
            var temp = prodDesc.split('|', prodDesc.length);
            prodDesc = temp[0];

            var version = $("#txtVersion").val();

            var colorCode = $("#ddlColor").val();
            var colorDesc = $("#ddlColor :selected").text();

            var priority = $("#ddlPriority :selected").text(); $("#ddlPriority").css("border-color", "#ccc")
            var quantity = $("#txtQuantity").val(); $("#txtQuantity").css("border-color", "#ccc");
            //var furhterContact = $("#ddlFurtherContact :selected").text(); $("#ddlFurtherContact").css("border-color", "#ccc");
            //var furtherDate = $("#txtFurtherDate").val(); $("#txtFurtherDate").css("border-color", "#ccc");

            var row = $(value).parent().parent().html();
            var dt = $("#productDetail tbody").append('<tr id="fixedRow' + (rowCount++) + '" data-tr-count="' + (dataCount++) + '">' +
                                                        '<td>' + SNo++ + '</td>' +
                                                        '<td> <label id="lblBrandCode">' + brand + ' </label><input type="hidden" id="hdnBrandCode" value="' + brandCode + '"/></td>' +
                                                        '<td> <label id="lblProdCode">' + prodDesc + ' </label><input type="hidden" id="hdnProdCode" value="' + prodCode + '"/></td>' +
                                                        '<td> <label id="lblVersion">' + version + ' </label></td>' +
                                                        '<td> <label id="lblColor">' + colorDesc + ' </label><input type="hidden" id="hdnColorCode" value="' + colorCode + '"/></td>' +
                                                        '<td> <label id="lblPriority">' + priority + ' </label></td>' +
                                                        '<td> <label id="lblQuantity">' + quantity + ' </label></td>' +
                                                        //'<td> <label id="lblFurtherContact">' + furhterContact + ' </label></td>' +
                                                        //'<td> <label id="lblFurtherDate">' + furtherDate + ' </label></td>' +
                                                        '<td style="text-align:center;"><button class="btn btn-danger btn-xs" onclick="removeRow(this)"><i class="fa fa-minus fa-lg"></i></button></td>' +
                                                        '</tr>');

        }
        else
        {

        }
        $("#ddlBrandCode").val(0); 
        $("#ddlProdCode").val(0);
        $("#txtVersion").val("");
        $("#ddlColor").val(0);
        $("#ddlPriority").val(0);
        $("#txtQuantity").val("");

    }

    function AddFollowUp(value)
    {
         
        var frowCount = 1;
        var fdataCount = 1;
        var fSNo = 1;
        var check = ValidateFollowUpDetails();

        if (check == true) {
            var FurtherContact = $("#ddlFurtherContact :selected").text();
            var FurtherContactCode = $("#ddlFurtherContact").val();

            var statusTypeCode = $("#ddlStatusType").val();
            var statusTypeDesc = $("#ddlStatusType :selected").text();

            var furtherDate = $("#txtFurtherDate").val(); $("#txtFurtherDate").css("border-color", "#ccc");
            var furtherTime = $("#txtFurtherTime").val(); $("#txtFurtherTime").css("border-color", "#ccc");

            var comments = $("#txtComments").val(); $("#txtComments").css("border-color", "#ccc");



            var row = $(value).parent().parent().html();
            var dt = $("#followupDetail tbody").append('<tr id="FollowUp' + (frowCount++) + '" data-tr-count="' + (fdataCount++) + '">' +
                                                        '<td>' + fSNo++ + '</td>' +
                                                        '<td> <label id="lblFurtherContact">' + FurtherContact + ' </label><input type="hidden" id="hdnFurtherContactCode" value="' + FurtherContactCode + '"/></td>' +
                                                        '<td> <label id="lblStatusType">' + statusTypeDesc + ' </label><input type="hidden" id="hdnStatusTypeCode" value="' + statusTypeCode + '"/></td>' +
                                                        '<td> <label id="lblFurtherDate">' + furtherDate + ' </label></td>' +
                                                        '<td> <label id="lblFurtherTime">' + furtherTime + ' </label></td>' +
                                                        '<td> <label id="lblComments">' + comments + ' </label></td>' +

                                                        '<td style="text-align:center;"><button class="btn btn-danger btn-xs" onclick="removeRow(this)"><i class="fa fa-minus fa-lg"></i></button></td>' +
                                                        '</tr>');

            $("#ddlFurtherContact").val(0);
            $("#ddlStatusType").val(0);
            $("#txtComments").val("");

        }
        else
        {

        }

         
    }


    function removeRow(value) {
        var tempRow = "fixedRow" + (parseInt($(value).parent().parent().attr("data-tr-count")) - 1);

        $("#" + tempRow).find('.remove').show();
        $(value).parent().parent().remove();

        dataCount--;
        rowCount--;
        SNo--;
    }

    function formatDate(value) {
        return value.getMonth() + 1 + "/" + value.getDate() + "/" + value.getYear();
    }

    function ValidateProductDetails()
    {
        var check = false;
        var brandCode = $("#ddlBrandCode").val();
        var prodCode = $("#ddlProdCode").val();
        var color = $("#ddlColor").val();
        var priority = $("#ddlPriority").val();
        var quantity = $("#txtQuantity").val();
        //var furhterContact = $("#ddlFurtherContact").val();
        //var furtherDate = $("#txtFurtherDate").val();

        if(brandCode == "0")
        {
            $("#ddlBrandCode").css("border-color", "red");
            return check;
        }
        else {
            $("#ddlBrandCode").css("border-color", "#ccc");
        }

        if (prodCode == "0") {
            $("#ddlProdCode").css("border-color", "red");
            return check;
        } else {
            $("#ddlProdCode").css("border-color", "#ccc");
        }

        if (color == "0") {
            $("#ddlColor").css("border-color", "red");
            return check;
        } else {
            $("#ddlColor").css("border-color", "#ccc");
        }

        if (priority == "0") {
            $("#ddlPriority").css("border-color", "red");
            return check;
        } else {
            $("#ddlPriority").css("border-color", "#ccc")
        }

        if (quantity == "0" || quantity == "" || quantity.includes("-") || quantity.includes(".")) {
            $("#txtQuantity").css("border-color", "red");
            return check;
        } else {
            $("#txtQuantity").css("border-color", "#ccc");
        }

        //if (furhterContact == "0") {
        //    $("#ddlFurtherContact").css("border-color", "red");
        //    return check;
        //} else {
        //    $("#ddlFurtherContact").css("border-color", "#ccc");
        //}

        //if (furtherDate == "") {
        //    $("#txtFurtherDate").css("border-color", "red");
        //    return check;
        //} else {
        //    $("#txtFurtherDate").css("border-color", "#ccc");
        //}

        check = true;
        return check;
    }


    function SaveForm()
    {
        $("#ddlBrandCode").css("border-color", "#ccc");
        $("#ddlProdCode").css("border-color", "#ccc");
        $("#ddlPriority").css("border-color", "#ccc")
        $("#txtQuantity").css("border-color", "#ccc");
        $("#ddlFurtherContact").css("border-color", "#ccc");
        $("#txtFurtherDate").css("border-color", "#ccc");

        

        saveEnquiryForm();
    }

    function saveEnquiryForm()
    {
         debugger
        var dto = {};
        var prospectId = $("#txtProspectID").val();
        var leadId = $("#txtEnquiry").val();
        var enqDate = $("#txtLeadDate").val();
        var interest = $("#ddlInterest :selected").text()
        var leadType = $("#ddlLeadType").val()
        var leadMode = $("#ddlLeadMode").val()
        var leadSource = $("#ddlLeadSource").val()
        var segmentId = $("#ddlLeadVehicleType").val()
        var invoiceType = $("#ddlInvoiceDetail :selected").text()
        var assignto = $("#ddlAssignTo").val()
        var bank = $("#ddlBank").val()
        var assignToBranch = $("#ddlAssignToBranch").val()
        var subject = $("#txtSubject").val()
        var event_campaign = $("#ddlLeadSource :selected").text();
        var campaign = "N";
        var IsEvent = "N";
        var cashFinanced = "Y";
        var IsFinanced = "N";
        var FinancedBank = "";
        var mobileNumber = $("#txtCustCellNo").val();

        if (event_campaign == "Event")
        {
            IsEvent = "Event";
        } else if (event_campaign == "Campaign")
        {
            campaign = "Campaign";
        }
        else
        {
            event_campaign = "None of both";
        }


        if(checkBank ==  true)
        {
            cashFinanced = "N";
            IsFinanced = "Y";
            check = validiadtor($("#ddlBank"));
            FinancedBank = bank;
        }

        
        dto.Enquiry_ID = leadId;
            dto.DealerCode = "@Session["DealerCode"].ToString()";
            dto.EnqDate = enqDate;
            dto.Interest = interest;
            dto.ProspectID = prospectId;
            dto.EmpCode = assignto;
            dto.ProspectTypeID = leadType;
            dto.EnquiryModeID = leadMode;
            dto.EnquirySourceID = leadSource;
            dto.Event = IsEvent;
            dto.Campaign = campaign;
            dto.InvoiceDetail = invoiceType;
            dto.SegmentID = segmentId;
            dto.IsDeleted = false;
            dto.IsMatured = "N";
            dto.CashFinanced = cashFinanced;
            dto.IsFinanced = IsFinanced;
            dto.FinancedBank = FinancedBank;
            dto.Remarks = subject;
            dto.ProspectLost = false;
            dto.EnquiryTypeID = leadType;
            dto.Mobile = mobileNumber;
            dto.Email = $("#txtEmail").val();

            $.ajax({
                dataType: "json",
                async: true,
                type: 'POST',
                url: '@Url.Content("~/Enquiry/Insert_EnquiryMaster")',
                data: dto,
                success: function (data) {
                    if (data) {
                        $("#txtLeadID").val(data.LeadId)
                        $("#txtProspectID").val(data.ProspectId);
                        //alert(data.Message)
                        //location.relead();
                        saveCustomerForm();
                    }
                },
                complete: function () {

                },
            });        
    }

    function saveCustomerForm() {
        var dto = {};
        //CUSTOMER INFO
         
        var prospectId = $("#txtProspectID").val();
        var leadId = $("#txtLeadID").val();
        var salutation = $("#ddlTitle").val();
        var custName = $("#txtCustName").val();
        var custEmail = $("#txtCustEmail").val()
        var contactPerson = $("#txtCustContactPerson").val()
        var dob = $("#txtDOB").val()
        var custMobile = $("#txtCustCellNo").val()
        var custPhone = $("#txtCustPhone").val()
        var custAddress = $("#txtCustAddress").val()
        var custNTN = $("#txtCustNTN").val()
        var custCity = $("#ddlCustCity").val()
        var custCountry = $("#ddlCustCountry").val()
        //WORK INFO
        var company = $("#txtCompany").val()
        var designation = $("#txtDesigntaion").val();
        var department = $("#txtDepartment").val();
        var workPhone = $("#txtOfficeNo").val() + " x " + $("#txtOfficeNoExt").val();
        var workAddress = $("#txtWorkAddress").val();
        var workCity = $("#ddlWorkCity").val();
        var education = $("#txtEducation").val();

            dto.Enquiry_ID = leadId; // Need to add this in View Model
            dto.DealerCode = "@Session["DealerCode"].ToString()";
            dto.ProspectID = prospectId;
            dto.ProspectTitle = salutation;
            dto.Name = custName;
            dto.ProspectType = $("#ddlLeadType").val();
            dto.NTN = custNTN;
            dto.ResAddress = custAddress;
            dto.ResCityCode = custCity;
            dto.ResPhone = custPhone;
            dto.Mobile = custMobile;
            dto.OfficeAddress = workAddress;
            dto.OffCityCode = workCity;
            dto.OffPhone = workPhone;
            dto.DOB = dob;
            dto.Profession = department;
            dto.Designation = designation;
            dto.Email = custEmail;
            dto.CompanyDetail = company;
            dto.ContactPerson = contactPerson;
            dto.Education = education;

            $.ajax({
                dataType: "json",
                async: true,
                type: 'POST',
                url: '@Url.Content("~/Enquiry/Insert_Prospect")',
                data: dto,
                success: function (data) {
                    if (data) {
                        if (data.Success == true)
                        {
                             
                                saveProductForm()

                        }
                        else {
                            $("#section-confirm").modal("hide")
                            $("#modalMessage").css("background-color", "#e46457");
                            $("#lblMessage").text(data.Message)
                            $("#section-message").modal('show');
                        }
                    }
                },
                complete: function () {

                },
            });

    }

    function insertRecord()
    {
         
        var obj = [];
        var leadId = $("#txtLeadID").val();
        $("#productDetail tbody tr").each(function () {
             
            var quantity = $(this).closest('tr').find('#lblQuantity').text().trim();
            var dto = {};
            quantity = parseInt(quantity)
            dto.EnquiryDetID = 0;
            dto.Enquiry_ID = leadId; // Need to add this in View Model
            dto.DealerCode = "@Session["DealerCode"].ToString()";
            dto.BrandCode =  $(this).closest('tr').find('#hdnBrandCode').val();
            dto.ProdCode = $(this).closest('tr').find('#hdnProdCode').val();
            dto.VersionCode = $(this).closest('tr').find('#lblVersion').text().trim();
            dto.ColorCode = $(this).closest('tr').find('#hdnColorCode').val();
            if (isNaN(quantity))
            {
                dto.Qty = 0;
            }
            else
            {
                dto.Qty = quantity;
            }

            dto.StatusCode = $(this).closest('tr').find('#lblPriority').text().trim();
            //dto.FurtherContact =$(this).closest('tr').find('#lblFurtherContact').text().trim();
            //dto.FurtherDate = $(this).closest('tr').find('#lblFurtherDate').text().trim();

            obj.push(dto);
        });

        return obj;
    }

    function saveProductForm() {

        var check = true;
        if (check == true) {


            var objects = [];

            objects = JSON.stringify({ 'objects': insertRecord() });

            $.ajax({
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                type: 'POST',
                url: '@Url.Content("~/Enquiry/Insert_EnquiryDetail")',
                data: objects,
                //async: true,
                //cache: false,
                //crossDomain: true,
                success: function (data) {
                    if (data) {
                        if (data.Success == true)
                        {

                                saveFollowUPForm();


                        }
                        else
                        {
                            $("#section-confirm").modal("hide")
                            $("#modalMessage").css("background-color", "#e46457");
                            $("#lblMessage").text(data.Message)
                            $("#section-message").modal('show');
                        }

                    }
                },
                complete: function () {

                },
            });

        }
    }

    function ValidateFollowUpDetails() {

        debugger
        var check = false;
        var leadId = $("#txtEnquiry").val();
        var furhterContact = $("#ddlFurtherContact").val();
        var statusType = $("#ddlStatusType").val();
        var furtherDate = $("#txtFurtherDate").val();
        var furhterTime = $("#txtFurtherTime").val();
        var comments = $("#txtComments").val();
        //var lostReason = $("#ddlLostReason").val();
        //var lostDate = $("#txtLostDate").val();
        //var lostComments = $("#txtLostComments").val();

        //if (leadId == "0")
        //{
        //    $("#txtEnquiry").css("border-color", "red");
        //    $('html, body').animate({
        //        scrollTop: $("#txtEnquiry").scrollTop(500)
        //    }, 800);
        //    return check;
        //}
        //else {
        //    $("#txtEnquiry").css("border-color", "#ccc");
        //}


        if (furhterContact == "0") {
            $("#ddlFurtherContact").css("border-color", "red");
            return check;
        }
        else {
            $("#ddlFurtherContact").css("border-color", "#ccc");
        }

        if (statusType == "0") {
            $("#ddlStatusType").css("border-color", "red");
            return check;
        } else {
            $("#ddlStatusType").css("border-color", "#ccc");
        }

        if (furtherDate == "" || furtherDate == undefined) {
            $("#txtFurtherDate").css("border-color", "red");
            return check;
        } else {
            $("#txtFurtherDate").css("border-color", "#ccc");
        }

        if (furhterTime == "" || furtherDate == undefined) {
            $("#txtFurtherTime").css("border-color", "red");
            return check;
        } else {
            $("#txtFurtherTime").css("border-color", "#ccc")
        }

        if (comments == "" || comments == undefined) {
            $("#txtComments").css("border-color", "red");
            return check;
        } else {
            $("#txtComments").css("border-color", "#ccc")
        }

        //if (statusType == "3")
        //{
        //    if (lostReason == "0") {
        //        $("#ddlLostReason").css("border-color", "red");
        //        return check;
        //    }
        //    else {
        //        $("#ddlLostReason").css("border-color", "#ccc");
        //    }

        //    if (lostDate == "" || lostDate == undefined) {
        //        $("#txtLostDate").css("border-color", "red");
        //        return check;
        //    } else {
        //        $("#txtLostDate").css("border-color", "#ccc");
        //    }

        //    if (lostComments == "" || lostComments == undefined) {
        //        $("#txtLostComments").css("border-color", "red");
        //        return check;
        //    } else {
        //        $("#txtLostComments").css("border-color", "#ccc");
        //    }
        //}

        check = true;
        return check;
    }

    function insertFollowUPRecord() {
        var obj = [];
        var leadId = $("#txtEnquiry").val();
        var IsLostEnq = false;
        var status = $("#ddlStatusType").val();

        (status == "3") ? IsLostEnq = true : IsLostEnq = false;

        $("#followupDetail tbody tr").each(function () {

             
            var dto = {};

            dto.EnquiryID = leadId; // Need to add this in View Model
            dto.DealerCode = "@Session["DealerCode"].ToString()";
            dto.IsLostEnq = IsLostEnq;
            //dto.LostReasonId = $("#ddlLostReason").val();
            //dto.LostDate = $("#txtLostDate").val();
            dto.NextFollowUpDate = $(this).closest('tr').find('#lblFurtherDate').text().trim();
            dto.NextFollowUpTime = $(this).closest('tr').find('#lblFurtherTime').text().trim();
            dto.NextFollowUpActionPlan = $(this).closest('tr').find('#hdnFurtherContactCode').val();
            dto.NextFollowUpPurpose = $(this).closest('tr').find('#lblComments').text().trim();
            dto.StatusTypeId = $(this).closest('tr').find('#hdnStatusTypeCode').val();
            obj.push(dto);
        });

        return obj;
    }

    function saveFollowUPForm()
    {
        //var check = ValidateFollowUpDetails();
        var check = true;
        if (check == true) {

            var objects = [];

            objects = JSON.stringify({ 'objects': insertFollowUPRecord() });

            $.ajax({
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                type: 'POST',
                url: '@Url.Content("~/Enquiry/Insert_FollowupDetail")',
                data: objects,
                //async: true,
                //cache: false,
                //crossDomain: true,
                success: function (data) {
                    if (data) {
                        if (data.Success == true) {
                            $("#section-confirm").modal("hide")
                            $("#modalMessage").css("background-color", "#64c344");
                            $("#lblTitle").text("Success");
                            $("#lblMessage").text(data.Message)
                            $("#section-message").modal('show');
                        }
                        else {
                            $("#section-confirm").modal("hide")
                            $("#modalMessage").css("background-color", "#e46457");
                            $("#lblTitle").text("Failure");
                            $("#lblMessage").text(data.Message)
                            $("#section-message").modal('show');
                        }

                    }
                },
                complete: function () {
                    location.reload();
                },
                error: function (data) {
                    $("#section-confirm").modal("hide")
                    $("#modalMessage").css("background-color", "#e46457");
                    $("#lblTitle").text("Failure");
                    $("#lblMessage").text(data.Message)
                    $("#section-message").modal('show');
                }
            });

        }
        else {
            $("#section-confirm").modal("hide")
            $("#modalMessage").css("background-color", "#e46457");
            $("#lblTitle").text("Failure");
            $("#lblMessage").text("Please fill mandatory fields..")
            $("#section-message").modal('show');
        }
    }

    //$("#txtEnquiry").change(function () {
    //    var leadId = $("#txtEnquiry").val();
    //    if (leadId == "0")
    //    {
    //        location.reload();
    //    }
    //    else
    //    {
    //        getData(leadId);
    //    }

    //});

    EnqNo = function (value) {
        debugger

        var EnqNo = $(value).closest('tr').find("#hdnEnqNo").val();

        getData(EnqNo);
        document.getElementById("txtEnquiry").value = EnqNo;
        //$("#txtEnquiry").css("border-color", "#e1e1e1");
        $("#EnquiryNoModal").modal("hide");
    }
    
    function getData(id) {

        var leadId = id;
        if (leadId != "0") {
            $.ajax({
                dataType: "json",
                async: true,
                type: 'GET',
                url: '@Url.Content("~/Enquiry/Select_EnquiryMaster")',
                data: { 'EnquiryId': leadId },
                success: function (data) {
                     ;
                    if (data.Success == true) {
                        var item = JSON.parse(data.Response)
                        debugger
                        //Lead Information
                        $("#txtLeadDate").val(item[0].EnqDate);
                        //$("#txtEnquiry").val();
                        (item[0].Interest == "New") ? $("#ddlInterest").val(1) : $("#ddlInterest").val(2)

                        $("#ddlLeadType").val(item[0].ProspectTypeID)
                        $("#ddlLeadMode").val(item[0].EnquiryModeID)
                        $("#ddlLeadSource").val(item[0].EnquirySourceID)
                        $("#ddlLeadVehicleType").val(item[0].SegmentID)
                        $("#ddlInvoiceDetail").val(1)
                        $("#ddlAssignTo").val(item[0].EmpCode.trim())
                        $("#txtCustCellNo").val(item[0].Mobile);
                        var IsFinanced = item[0].IsFinanced.trim();
                        if (IsFinanced == "Y") {
                            // Make check Box Checked
                            $("#ddlBank").prop("disabled", true);
                            $("#ddlBank").val(item[0].FinancedBank)
                            $('input').iCheck('check');
                        } else {
                            $(".icheckbox_minimal-blue").prop("disabled", true);
                            
                        }


                        $("#txtSubject").val(item[0].Remarks)
                        $("#txtProspectID").val(item[0].ProspectID);
                        //Customer  and Work Details
                        $("#ddlCustomerId").val(item[0].ProspectID);
                        $("#ddlTitle").val(item[0].ProspectTitle);
                        $("#txtCustName").val(item[0].Name);
                        $("#txtCustEmail").val(item[0].Email)
                        $("#txtCustContactPerson").val(item[0].ContactPerson)
                        $("#txtDOB").val(item[0].DOB)
                        $("#txtCustCellNo").val(item[0].Mobile)
                        $("#txtCustPhone").val(item[0].ResPhone)
                        $("#txtCustAddress").val(item[0].ResAddress)
                        $("#txtCustNTN").val(item[0].NTN)
                        $("#ddlCustCity").val(item[0].ResCityCode)
                        //$("#ddlCustCountry").val()
                        //WORK INFO
                        $("#txtCompany").val(item[0].CompanyDetail)
                        $("#txtDesigntaion").val(item[0].Designation);
                        $("#txtDepartment").val(item[0].Profession);
                        var str = item[0].OffPhone;
                        if(str != null){
                        var officephone = new Array();
                        officephone = str.split("x");
                        $("#txtOfficeNo").val(officephone[0].trim()) + " x " + $("#txtOfficeNoExt").val(officephone[1].trim());
                        }
                        $("#txtWorkAddress").val(item[0].OfficeAddress);
                        $("#ddlWorkCity").val(item[0].OffCityCode);

                        //ProductDetail
                        Get_EnquiryDetailData(id)

                        GetFollowUpData(id)
                    }
                },
                complete: function () {

                },
            });

        }

    }

    $("#ddlCustomerId").change(function () {
        var leadId = $("#ddlCustomerId").val();
        if (leadId != "0")
        {
            getCustomer(leadId);
        }
        

    });

    function getCustomer(id) {

        var leadId = id;
        if (leadId != "0") {
            $.ajax({
                dataType: "json",
                async: true,
                type: 'GET',
                url: '@Url.Content("~/Enquiry/Select_PreCustomerID")',
                data: { 'EnquiryId': leadId },
                success: function (data) {
                     ;
                    if (data.Success == true) {
                        var item = JSON.parse(data.Response)


                        $("#ddlLeadType").val(item[0].ProspectTypeID)
                       
                        $("#txtProspectID").val(item[0].ProspectID);
                        //Customer  and Work Details
                        $("#ddlTitle").val(item[0].ProspectTitle);
                        $("#txtCustName").val(item[0].Name);
                        $("#txtCustEmail").val(item[0].Email)
                        $("#txtCustContactPerson").val(item[0].ContactPerson)
                        $("#txtDOB").val(item[0].DOB)
                        $("#txtCustCellNo").val(item[0].Mobile)
                        $("#txtCustPhone").val(item[0].ResPhone)
                        $("#txtCustAddress").val(item[0].ResAddress)
                        $("#txtCustNTN").val(item[0].NTN)
                        $("#ddlCustCity").val(item[0].ResCityCode)
                        //$("#ddlCustCountry").val()
                        //WORK INFO
                        $("#txtCompany").val(item[0].CompanyDetail)
                        $("#txtDesigntaion").val(item[0].Designation);
                        $("#txtDepartment").val(item[0].Profession);
                        var str = item[0].OffPhone;
                        if(str != null){
                            var officephone = new Array();
                            officephone = str.split("x");
                            $("#txtOfficeNo").val(officephone[0].trim()) + " x " + $("#txtOfficeNoExt").val(officephone[1].trim());
                        }
                        $("#txtWorkAddress").val(item[0].OfficeAddress);
                        $("#ddlWorkCity").val(item[0].OffCityCode);

                    }
                },
                complete: function () {

                },
            });

        }

    }

    function GetFollowUpData(Id)
    {

        var frowCount = 1;
        var fdataCount = 1;
        var fSNo = 1;

        var leadId = Id;
        if (leadId != "0") {
            $.ajax({
                dataType: "json",
                async: true,
                type: 'GET',
                url: '@Url.Content("~/Enquiry/Select_FollowUpDetail")',
                data: { 'EnquiryId': leadId},
                success: function (data) {
                     ;
                    if (data.Success == true) {
                        var item = JSON.parse(data.Response)
                        $("#followupDetail tbody tr").remove()
                        //ProductDetail
                        if (item.length > 0) {
                            $.each(item, function (value, item) {

                                $("#followupDetail tbody").append('<tr id="FollowUp' + (frowCount++) + '" data-tr-count="' + (fdataCount++) + '">' +
                                                       '<td>' + fSNo++ + '</td>' +
                                                       '<td> <label id="lblNextAction">' + item.NextFollowUpActionPlan.trim() + ' </label><input type="hidden" id="hdnFurtherContactCode" value="' + item.TaskTypeCode + '"/></td>' +
                                                       '<td> <label id="lblStatusType">' + item.StatusType.trim() + ' </label> <input type="hidden" id="hdnStatusTypeCode" value="' + item.StatusTypeId + '" /> </td>' +
                                                       '<td> <label id="lblFurtherDate">' + item.NextFollowUpDate.trim() + ' </label></td>' +
                                                       '<td> <label id="lblFurtherTime">' + item.NextFollowUpTime.trim() + ' </label></td>' +
                                                       '<td> <label id="lblComments">' + item.NextFollowUpPurpose.trim() + ' </label></td>' +
                                                       '<td style="text-align:center;"><button class="btn btn-danger btn-xs" onclick="removeRow(this)"><i class="fa fa-minus fa-lg"></i></button></td>' +
                                                       '</tr>');

                                if (item.StatusTypeId == 3) {
                                    //$("#LostArea").show();
                                    $("#ddlLostReason").val(item.LostReasonId);
                                    $("#txtLostDate").val(item.LostDate);
                                    $("#txtLostComments").val(item.NextFollowUpPurpose);
                                    $("#btnSave").prop("disabled", true)
                                    $("#btnAddData").prop("disabled", true)
                                }
                            });
                        }
                    }
                },
                complete: function () {

                },
            });

        }
    }

    function Get_EnquiryDetailData(id)
    {
        var rowCount = 1;
        var dataCount = 1;
        var SNo = 1;
        
        var leadId = id;
        if (leadId != "0") {
            $.ajax({
                dataType: "json",
                async: true,
                type: 'GET',
                url: '@Url.Content("~/Enquiry/Select_EnquiryDetail")',
                data: { 'EnquiryId': leadId},
                success: function (data) {
                     ;
                    if (data.Success == true) {
                        var item = JSON.parse(data.Response)
                        $("#productDetail tbody tr").remove()
                        //ProductDetail
                        if (item.length > 0)
                        {

                            $.each(item, function (value, item) {

                                $("#productDetail tbody").append('<tr id="fixedRow' + (rowCount++) + '" data-tr-count="' + (dataCount++) + '">' +
                                                        '<td>' + SNo++ + '</td>' +
                                                        '<td> <label id="lblBrandCode">' + item.BrandDesc + ' </label><input type="hidden" id="hdnBrandCode" value="' + item.BrandCode + '"/></td>' +
                                                        '<td> <label id="lblProdCode">' + item.ProdDesc + ' </label><input type="hidden" id="hdnProdCode" value="' + item.ProdCode + '"/></td>' +
                                                        '<td> <label id="lblVersion">' + item.VersionCode + ' </label></td>' +
                                                        '<td> <label id="lblColor">' + item.ColorDesc + ' </label><input type="hidden" id="hdnColorCode" value="' + item.ColorCode + '"/></td>' +
                                                        '<td> <label id="lblPriority">' + item.StatusCode + ' </label></td>' +
                                                        '<td> <label id="lblQuantity">' + item.Qty + ' </label></td>' +
                                                        //'<td> <label id="lblFurtherContact">' + furhterContact + ' </label></td>' +
                                                        //'<td> <label id="lblFurtherDate">' + furtherDate + ' </label></td>' +
                                                        '<td style="text-align:center;"><button class="btn btn-danger btn-xs" onclick="removeRow(this)"><i class="fa fa-minus fa-lg"></i></button></td>' +
                                                        '</tr>');

                            });

                        }
                    }
                },
                complete: function () {

                },
            });

        }

    }

    function validiadtor(control)
    {
        var input = control.val();
        if(input == "0" || input == "")
        {
            control.css("border-color", "red")
            control.focus();            
            $("#section-confirm").modal("hide");
            $("#lblMessage").text("Please select the Required feild");
            $("#section-message").modal("show");
            return false;
        }
        else
        {
            control.css("border-color", "#ccc")
            return true;
        }

    }


    function PageValidation() {
         
        debugger
        var count = 0;
        var tableRow = 0;

        if ($("#ddlInterest").val() == '0' || $("#ddlInterest").val() == null) {
            $("#ddlInterest").css("border-color", "red");
            $("#ddlInterest").focus();
            count++;
        }
        if ($("#ddlLeadType").val() == '0' || $("#ddlLeadType").val() == null) {
            $("#ddlLeadType").css("border-color", "red");
            $("#ddlLeadType").focus();
            count++;
        }
        if ($("#ddlLeadMode").val() == '0' || $("#ddlLeadMode").val() == null) {
            $("#ddlLeadMode").css("border-color", "red");
            $("#ddlLeadMode").focus();
            count++;
        }
        if ($("#ddlLeadSource").val() == '0' || $("#ddlLeadSource").val() == null) {
            $("#ddlLeadSource").css("border-color", "red");
            $("#ddlLeadSource").focus();
            count++;
        }    
        if ($("#ddlLeadVehicleType").val() == '0' || $("#ddlLeadVehicleType").val() == null) {
            $("#ddlLeadVehicleType").css("border-color", "red");
            $("#ddlLeadVehicleType").focus();
            count++;
        }
        
        if ($("#ddlInvoiceDetail").val() == '0' || $("#ddlInvoiceDetail").val() == null) {
            $("#ddlInvoiceDetail").css("border-color", "red");
            $("#ddlInvoiceDetail").focus();
            count++;
        }
        if ($("#ddlAssignTo").val() == '0' || $("#ddlAssignTo").val() == null) {
            $("#ddlAssignTo").css("border-color", "red");
            $("#ddlAssignTo").focus();
            count++;
        } 
        if ($("#txtCustName").val() == '' || $("#txtCustName").val() == null) {
            $("#txtCustName").css("border-color", "red");
            $("#txtCustName").focus();
            count++;
        }
        if ($("#txtCustCellNo").val() == '' || $("#txtCustCellNo").val() == null) {
            $("#txtCustCellNo").css("border-color", "red");
            $("#txtCustCellNo").focus();
            count++;
        }
        if ($("#ddlCustCity").val() == '0' || $("#ddlCustCity").val() == null) {
            $("#ddlCustCity").css("border-color", "red");
            $("#ddlCustCity").focus();
            count++;
        }

        var row = $('#productDetail >tbody  >tr').length;
        //if (row < 1) {
        //    $("#productDetail").css("border-color", "red");
        //    $("#ddlBrandCode").focus();
        //    $("#lblMessage").text("Please select 1 product first");
        //    $("#section-message").modal("show");
        //    tableRow++;
        //}

        var frow = $('#followupDetail >tbody  >tr').length;
        //if (frow < 1) {
        //    $("#followupDetail").css("border-color", "red");
        //    $("#ddlFurtherContact").focus();
        //    $("#lblMessage").text("Please select 1 followup first");           
        //    tableRow++;
        //}
        
        if (count > 0 || row == 0 || frow == 0) {
            
            $("#lblMessage").html("Please fill the Required feilds");
            $("#section-message").modal("show");
            return false;
        }
        else {
            return true;
        }

    }

    function ChangeColor(value) {
         
        if ($(value).val() != '')
            $(value).css("border-color", "#e1e1e1");
    }

    $('#txtCustCellNo').keypress(function (event) {
        var keycode = event.which;
        if (!(event.shiftKey == false && (keycode == 46 || keycode == 8 || keycode == 37 || keycode == 39 || (keycode >= 48 && keycode <= 57)))) {
            event.preventDefault();
        }
    });

    $('#txtCustPhone').keypress(function (event) {
        var keycode = event.which;
        if (!(event.shiftKey == false && (keycode == 46 || keycode == 8 || keycode == 37 || keycode == 39 || (keycode >= 48 && keycode <= 57)))) {
            event.preventDefault();
        }
    });

    $('#txtOfficeNo').keypress(function (event) {
        var keycode = event.which;
        if (!(event.shiftKey == false && (keycode == 46 || keycode == 8 || keycode == 37 || keycode == 39 || (keycode >= 48 && keycode <= 57)))) {
            event.preventDefault();
        }
    });

    $('#txtOfficeNoExt').keypress(function (event) {
        var keycode = event.which;
        if (!(event.shiftKey == false && (keycode == 46 || keycode == 8 || keycode == 37 || keycode == 39 || (keycode >= 48 && keycode <= 57)))) {
            event.preventDefault();
        }
    });
</script>
