
@{
    ViewBag.Title = "Alert";
    Layout = "~/Views/Shared/_LayoutV2.cshtml";
}
<style>

    th{
        /*background-color : #3F51B5;*/
        color: white;
        text-align : center;
        
    }
    td label{
        cursor: pointer;
        text-align: center;
    }
</style>
<link href="~/assets/plugins/datatables/css/jquery.dataTables.css" rel="stylesheet" />
<link href="~/assets/plugins/datatables/css/jquery.dataTables.min.css" rel="stylesheet" />
<section class="wrapper main-wrapper row">
    <div class="clearfix"></div>

    <form method="post">
        <div class="col-xs-12">
            <section class="box">
                <header class="panel-header">
                    <h2 class="title pull-left">Alert Details</h2>
                </header>
                <div class="row">

                    <div class="col-xs-12">

                        <ul class="nav nav-tabs nav-justified primary">
                            <li class="active">
                                <a href="#profile-7" data-toggle="tab">
                                    <i></i> Follow Up Details
                                </a>
                            </li>
                            <li>
                                <a href="#home-7" data-toggle="tab">
                                    <i></i> Task Details
                                </a>
                            </li>

                        </ul>

                        <div class="tab-content primary">
                            <div class="tab-pane fade in active" id="profile-7">
                                @*<div class="col-xs-12">*@

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="table-responsive" style="height:400px">
                                            <table class="table table-bordered table-striped" id="FollowUpDetail" style="cursor:pointer">
                                                <thead>
                                                    <tr>
                                                        <th>#</th>
                                                        <th>Enquiry Id</th>
                                                        <th>Enquiry Date</th>
                                                        <th>Customer</th>
                                                        <th>FollowUp Date</th>
                                                        <th>FollowUp Time</th>
                                                        <th>Next Action Plan</th>
                                                    </tr>
                                                </thead>
                                                <tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>


                                @*</div>*@        <!-- PRODUCT INFORMATION ENDS -->
                            </div>
                            <div class="tab-pane fade" id="home-7">

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="table-responsive" style="height:400px">
                                            <table class="table table-bordered table-striped" id="TaskDetail">
                                                <thead>
                                                    <tr>
                                                        <th>#</th>
                                                        <th>Task Id</th>
                                                        <th>Task Date</th>
                                                        <th>Customer</th>
                                                        <th>Cell No</th>
                                                        <th>Lead ID</th>
                                                        <th>Status</th>
                                                        <th>Start Date</th>
                                                        <th>End Date</th>
                                                    </tr>
                                                </thead>
                                                <tbody style="cursor:pointer"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            @*</div>*@

                        </div>

                    </div>
                </div>
            </section>
        </div>
    </form>
    <!-- Popup box modal start -->
    <div class="modal" id="section-confirm" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog animated bounceInDown">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Confirm</h4>
                </div>
                <div class="modal-body">

                    <h5>Are you sure want to save ?</h5>

                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                    <button class="btn btn-success" type="button" onclick="SaveForm()">Save</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal end -->
    <!-- Popup box modal start -->
    <div class="modal" id="section-message" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog animated bounceInDown">
            <div class="modal-content">
                <div class="modal-header" id="modalMessage">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="lblTitle"></h4>
                </div>
                <div class="modal-body">

                    <h5 id="lblMessage"></h5>

                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button" onclick="location.reload();">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal end -->
    <!-- MAIN CONTENT AREA ENDS -->
</section>

<link href='@Url.Content("~/assets/plugins/select2/select2.css")' rel="stylesheet" type="text/css" media="screen" />
<link href='@Url.Content("~/assets/plugins/icheck/skins/minimal/blue.css")' rel="stylesheet" type="text/css" media="screen" />
<script src='@Url.Content("~/assets/js/jquery-1.11.2.min.js")' type="text/javascript"></script>
<script src='@Url.Content("~/assets/plugins/select2/select2.min.js")' type="text/javascript"></script>

@*<script src='@Url.Content("~/assets/plugins/datatables/js/jquery.dataTables.js")'></script>
<script src='@Url.Content("~/assets/plugins/datatables/js/jquery.dataTables.min.js")'></script>*@
<script src="~/Scripts/jquery-1.10.2.min.js"></script>  
<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.10/css/jquery.dataTables.min.css">
<script type="text/javascript" language="javascript" src="//cdn.datatables.net/1.10.10/js/jquery.dataTables.min.js"></script> 
<script>

    $(document).ready(function () {
        Get_AlertTaskDetailsData();
        Get_FollowUpDetailsData();

    })

    function Get_AlertTaskDetailsData() {
        var rowCount = 1;
        var dataCount = 1;
        var SNo = 1;
        $.ajax({
            dataType: "json",
            async: true,
            type: 'GET',
            url: '@Url.Content("~/Enquiry/Select_AlertTaskData")',
            success: function (data) {
                if (data.Success == true) {
                    var item = JSON.parse(data.Response)
                    $("#TaskDetail tbody tr").remove()
                    //ProductDetail
                    if (item.length > 0) {
                        $.each(item, function (value, item) {
                            debugger;
                            $("#TaskDetail tbody").append('<tr onclick="SelectedTask(this);" style="cursor:pointer" id="fixedRow' + (rowCount++) + '" data-tr-count="' + (dataCount++) + '">' +
                                                    '<td>' + SNo++ + '</td>' +
                                                    '<td> <label id="lblTaskId">' + item.TaskID + ' </label></td>' +
                                                    '<td> <label id="lblTaskDate">' + item.TaskCreateDate + ' </label></td>' +
                                                    '<td> <label id="lblName">' + item.Prospect_ID + ' </label></td>' +
                                                    '<td> <label id="lblMobile">' + item.Contact + ' </label></td>' +
                                                    '<td> <label id="lblLeadID">' + item.Lead_ID + ' </label></td>' +
                                                    '<td> <label id="lblStatusID">' + item.StatusId + ' </label></td>' +
                                                    '<td> <label id="lblStartDate">' + item.StartDate + ' </label></td>' +
                                                    '<td> <label id="lblEndDate">' + item.EndDate + ' </label></td>' +
                                                    '</tr>');
                        });
                    }
                }
            },
            complete: function () {

            },
        });

        //}

    }


        function Get_FollowUpDetailsData() {
            var rowCount = 1;
            var dataCount = 1;
            var SNo = 1;

            $.ajax({
                dataType: "json",
                async: true,
                type: 'GET',
                url: '@Url.Content("~/Enquiry/Select_AlertFollowUpData")',
                success: function (data) {

                    if (data.Success == true) {
                        var item = JSON.parse(data.Response)
                        $("#FollowUpDetail tbody tr").remove()
                        //ProductDetail
                        if (item.length > 0) {

                            $.each(item, function (value, item) {
                                debugger;
                                $("#FollowUpDetail tbody").append('<tr onclick="SelectedFollowUp(this);" style="cursor:pointer" id="fixedRow' + (rowCount++) + '" data-tr-count="' + (dataCount++) + '">' +
                                                                    '<td>' + SNo++ + '</td>' +
                                                                    '<td> <label id="lblEnquiryId">' + item.Enquiry_ID + ' </label></td>' +
                                                                    '<td> <label id="lblEnqDate">' + item.EnqDate + ' </label></td>' +
                                                                    '<td> <label id="lblName">' + item.Name + ' </label></td>' +
                                                                    '<td> <label id="lblFollowUpDate">' + item.NextFollowUpDate + ' </label></td>' +
                                                                    '<td> <label id="lblFollowUpTime">' + item.NextFollowUpTime + ' </label></td>' +
                                                                    '<td> <label id="lblFollowUpTime">' + item.NextFollowupActionPlan + ' </label></td>' +
                                        
                                                                                '</tr>');
                                //$("#FollowUpDetail").DataTable();

                            });
                            //$("#FollowUpDetail").DataTable();
                        }
                    }
                },
                complete: function () {

                },
            });
        }


    function SelectedFollowUp(value) {
        debugger;

        var leadId = $(value).closest('tr').find("#lblEnquiryId").text();

        @*var baseurl = '@Url.Action("FollowUp", "Enquiry")';
        var url = baseurl + '?EnquiryId=' + leadId + '';*@
        window.location.href = "/Enquiry/FollowUp?EnquiryId=" + leadId;
    }


    function SelectedTask(value) {
        debugger;

        var leadId = $(value).closest('tr').find("#lblTaskId").text();

       @*var baseurl = '@Url.Action("FollowUp", "Enquiry")';
        var url = baseurl + '?EnquiryId=' + leadId + '';*@
        window.location.href = "/Task/TaskDetail?TaskID=" + leadId;
    }
</script>


