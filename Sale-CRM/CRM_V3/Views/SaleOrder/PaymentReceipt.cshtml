@{
    ViewBag.Title = "Payment Rceipt";
    Layout = "~/Views/Shared/_LayoutV2.cshtml";
}

<link href='@Url.Content("~/assets/plugins/jquery-ui/smoothness/jquery-ui.min.css")' rel="stylesheet" type="text/css" media="screen" />
<link href='@Url.Content("~/assets/plugins/select2/select2.css")' rel="stylesheet" type="text/css" media="screen" />

<link href='@Url.Content("~/assets/plugins/icheck/skins/minimal/blue.css")' rel="stylesheet" type="text/css" media="screen" />

<section class="wrapper main-wrapper row">


    <form method="post">

        <div class="col-md-12">
            <section class="box">
                <header class="panel_header">
                    <h2 class="title pull-left">Payment Receipt</h2>
                    <div class="actions panel_actions pull-right">
                        <a class="box_toggle fa fa-chevron-down"></a>
                        @*<a class="box_setting fa fa-cog" data-toggle="modal" href="#section-settings"></a>*@
                    </div>
                </header>
                <div class="content-body">
                    <div class="row">
                        <div class="col-sm-12 col-xs-12">
                            

                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Receipt No</label>
                                <div class="input-group">
                                    <span class="input-group-addon"><a data-toggle="modal" data-target="#ReceiptModel" style="color:blue"><i class="fa fa-search"></i></a></span>
                                    <input type="text" class="form-control" id="txtReceiptNo" readonly>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Receipt Date</label>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                    <input type="text" class="form-control datepicker" id="txtReceiptDate" placeholder="dd/mm/yyyy">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Transaction Type</label>
                                <div class="input-group">
                                    <span class="input-group-addon"><a data-toggle="modal" data-target="#VenderModel" style="color:blue"><i class="fa fa-search"></i></a></span>
                                    <select class="dropdown-toggle form-control" id="ddlTransType">
                                        <option value="0">Select</option>
                                        <option value="Advance">Advance</option>
                                        <option value="Customer">Customer</option>

                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Invoice Type</label>
                                <div class="input-group">
                                    <span class="input-group-addon"><a data-toggle="modal" data-target="#VenderModel" style="color:blue"><i class="fa fa-search"></i></a></span>
                                    <select class="dropdown-toggle form-control" id="ddlInvType">
                                        <option value="0">Select</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Customer No</label>
                                <div class="input-group">
                                    <span class="input-group-addon"><a data-toggle="modal" data-target="#CustomerModal" style="color:blue"><i class="fa fa-search"></i></a></span>
                                    <input type="text" class="form-control" id="txtCusCode" style="width:35%;" placeholder="Code" maxlength="5" readonly>
                                    <input type="text" class="form-control" id="txtCusDesc" readonly style="width:65%;" placeholder="Name">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Total Amount</label>
                                <div class="input-group">
                                    <span class="input-group-addon"><a data-toggle="modal" data-target="#CostCenterModel" style="color:blue"><i class="fa fa-search"></i></a></span>
                                    <input type="text" class="form-control" id="txtTotalAmount" placeholder="Amount" readonly>
                                </div>
                            </div>
                            <div class="col-md-3 ">
                                <label class="form-label">Cost Center</label>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                    <input type="text" class="form-control" id="txtCosCenter" readonly placeholder="Name">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Remarks</label>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="fa fa-comment"></i></span>
                                    <input type="text" class="form-control" id="txtRemarks" placeholder="Remarks">
                                </div>
                            </div>
                        <div class="col-md-3 ">
                            <label class="form-label">Voucher No</label>
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                <input type="text" class="form-control" id="txtVoucher" readonly placeholder="Name">
                            </div>
                        </div>


                            <div class="row pull-right" style="margin-right:10px;">
                                

                                <button type="button" class="btn btn-default" id="btnPInvoices" onclick="loadInvoices()" style="margin-top:27px; width:150px; border-radius:0px;">Pending Invoices</button>
                                <input type="hidden" id="hdnadj" value="f" />
                                <button type="button" class="btn btn-success" id="btnautoAdjust" style="margin-top:27px; width:180px; border-radius:0px;">Payment Adjust (FIFO)</button>

                            </div>


                        </div>




                   
                    <div class="row">
                        <div class="col-xs-12">
                            <ul class="nav nav-tabs primary" style="border-radius:0px; ">
                                <li class="active">
                                    <a href="#tabInvoices" data-toggle="tab" style="border-radius:0px;">
                                        <i class="fa fa-car"></i>Invoices
                                    </a>
                                </li>
                                <li>
                                    <a href="#tabPayment" data-toggle="tab" style="border-radius:0px;">
                                        <i class="fa fa-car"></i>Payment
                                    </a>
                                </li>
                                <li>
                                    <a href="#tabTaxHead" data-toggle="tab" style="border-radius:0px;">
                                        <i class="fa fa-car"></i>Tax Head
                                    </a>
                                </li>
                            </ul>

                            <div class="tab-content primary">
                                <div class="tab-pane fade in active" id="tabInvoices">
                                    
                                    <div class="form-group row">





                                        <div class="col-md-12" style="margin-top:15px">
                                            <div class="table-respon table-bordered">
                                                <table id="tblInvoice" class="table success color-bordered-table info-bordered-table">
                                                    <thead class="">
                                                        <tr>
                                                            <th>Sr#</th>
                                                            <th>Invoice No</th>
                                                            <th>Invoice Date</th>
                                                            <th>Invoice Amount</th>
                                                            <th style="text-align : center">Outstanding</th>
                                                            <th style="text-align : center">Adjustment</th>
                                                            <th style="text-align : right">Remaining</th>
                                                            <th style="text-align : right">Action</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                       
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>



                                        <div class="col-md-2 col-md-offset-6" style="margin-top:10px">
                                            <label class="form-label">Outstanding </label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="txtOutStanding" placeholder="Outstandings" readonly>
                                            </div>
                                        </div>

                                        <div class="col-md-2" style="margin-top:10px">
                                            <label class="form-label">Adjustments</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="txtAdjustment" placeholder="Adjustments" readonly>
                                            </div>
                                        </div>

                                        <div class="col-md-2" style="margin-top:10px">
                                            <label class="form-label">Invoices</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="txtInvoices" placeholder="Total Invoices" readonly>
                                            </div>
                                        </div>








                                    </div>

                                </div>
                                <div class="tab-pane fade" id="tabPayment">
                                    <div class="row">
                                        @*<div class="col-md-3">
                    <label class="form-label">Receipt Account</label>
                    <div class="input-group">
                        <span class="input-group-addon"><a data-toggle="modal" data-target="#CashBankModel" style="color:blue"><i class="fa fa-search"></i></a></span>
                        <input type="text" class="form-control" id="txtSoDate" placeholder="Code" readonly>
                        <span class="input-group-addon"><a href="@Url.Action("AccountSetup","Definition")"><i class="fa fa-plus"></i></a></span>
                    </div>
                </div>*@

                                        <div class="col-md-2">
                                            <label class="form-label">Inc Adv</label>
                                            <div class="input-group">
                                                <input type="checkbox" class="checkbox-inline" id="chkAdv">
                                            </div>
                                        </div>

                                        <div class="col-md-2">
                                            <label class="form-label">Inc Adv</label>
                                            <div class="input-group">
                                                <span class="input-group-addon"><a data-toggle="modal" data-target="#AdvanceReceiptModel" style="color:blue"><i class="fa fa-search"></i></a></span>
                                                <input type="text" class="form-control" id="txtAdvanceReceiptNo" disabled="disabled"  placeholder="__/____">
                                            </div>
                                        </div>

                                        <div class="col-md-2">
                                            <label class="form-label">Advance Amount</label>
                                            <div class="input-group">
                                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                <input type="text" class="form-control" id="txtAdvanceAmount" disabled="disabled" placeholder="Advance">
                                            </div>
                                        </div>

                                        <div class="col-md-2">
                                            <label class="form-label">Pay Mode</label>
                                            <div class="input-group">
                                                <span class="input-group-addon"><a data-toggle="modal" data-target="#PaymentModeModel" style="color:blue"><i class="fa fa-search"></i></a></span>
                                                @Html.DropDownList("ddlPayMode", new SelectList((IEnumerable<SelectListItem>)ViewBag.PayMode, "Value", "Text", "C"), new { @class = "form-control", @id = "ddlPayMode", @onchange = "ChangeColor(this)" })
                                                @*<span class="input-group-addon"><a href="@Url.Action("AccountSetup","Definition")"><i class="fa fa-plus"></i></a></span>*@
                                            </div>
                                        </div>



                                        <div class="col-md-2">
                                            <label class="form-label">Inst Date</label>
                                            <div class="input-group">
                                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                <input type="text" class="form-control datepicker" id="txtInsDate" data-format="D, dd MM yyyy">
                                            </div>
                                        </div>




                                        <div class="col-md-2">
                                            <label class="form-label">Bank</label>
                                            <div class="input-group">
                                                <span class="input-group-addon"><a data-toggle="modal" data-target="#BankModel" style="color:blue"><i class="fa fa-search"></i></a></span>
                                                @Html.DropDownList("ddlBank", new SelectList((IEnumerable<SelectListItem>)ViewBag.Bank, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlBank", @onchange = "ChangeColor(this)" })
                                                @*<span class="input-group-addon"><a href="@Url.Action("AccountSetup","Definition")"><i class="fa fa-plus"></i></a></span>*@
                                            </div>
                                        </div>

                                        <div class="col-md-2">
                                            <label class="form-label">Branch</label>
                                            <div class="input-group">
                                                <span class="input-group-addon"><i class="fa fa-home"></i></span>
                                                <input type="text" class="form-control" id="txtBranch" placeholder="Code" readonly>
                                            </div>
                                        </div>

                                        <div class="col-md-2">
                                            <label class="form-label">Instrument No</label>
                                            <div class="input-group">
                                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                <input type="text" class="form-control" id="txtInsNo" placeholder="Instrument No">
                                            </div>
                                        </div>

                                        <div class="col-md-2">
                                            <label class="form-label">Amount</label>
                                            <div class="input-group">
                                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                <input type="text" class="form-control" id="txtInsAmount" placeholder="Amount">
                                            </div>
                                        </div>
                                        @*<div class="col-md-2">
                    <button type="button" class="btn btn-warning" id="btnAutoAdjust" style="margin-top: 2.4rem; width: 130px">Auto Adjust(FIFO)</button>
                </div>*@

                                    </div>

                                </div>
                                <div class="tab-pane fade" id="tabTaxHead">
                                    <div class="form-group row">

                                        <div class="col-md-4">
                                            <label class="form-label">Tax Head</label>
                                            <div class="input-group">
                                                <span class="input-group-addon"><a style="color:blue"><i class="fa fa-tag"></i></a></span>
                                                @Html.DropDownList("ddlTaxHead", new SelectList((IEnumerable<SelectListItem>)ViewBag.TaxType, "Value", "Text", "0"), new { @class = "form-control m-bot15", @id = "ddlTaxHead", @onchange = "ChangeColor(this)" })

                                                @*<span class="input-group-addon"> data-toggle="modal"data-target="#ReceiptHeadModel"<a href="@Url.Action("AccountSetup","Definition")"><i class="fa fa-plus"></i></a></span>*@
                                            </div>
                                        </div>

                                        <div class="col-md-2">
                                            <label class="form-label">Percentage</label>
                                            <div class="input-group">
                                                <span class="input-group-addon"><i class="fa fa-search"></i></span>
                                                <input type="text" class="form-control" id="txtTaxPer" placeholder="Percentage">
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <label class="form-label">Amount</label>
                                            <div class="input-group">
                                                <span class="input-group-addon"><i class="fa fa-search"></i></span>
                                                <input type="text" class="form-control" id="txtTaxAmount" placeholder="Amount">
                                            </div>
                                        </div>
                                        <div class="col-md-2 pull-right">
                                            <button type="button" class="btn btn-warning" id="btnTaxAdd " onclick="AddTax(this)" style="margin-top: 2.4rem; width: 60px">Add</button>

                                            <button type="button" class="btn btn-warning" id="btnTaxClear" onclick="clearTax(this)" style="margin-top: 2.4rem; width: 60px">Clear</button>
                                        </div>


                                        <div class="col-md-12" style="margin-top:15px">
                                            <div class="table-respon table-bordered">
                                                <table id="tblTaxDetail" class="table success color-bordered-table info-bordered-table">
                                                    <thead class="">
                                                        <tr>
                                                            <th>Sr#</th>
                                                            <th>Reaceipt Head</th>
                                                            <th>Description</th>
                                                            <th>Tax Per.</th>
                                                            <th>Amount</th>
                                                            <th style="text-align : right">Action</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr id="fixedRowTax"></tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>

                                        <div class="col-md-3 pull-right">
                                            <label class="form-label">Total Taxes</label>
                                            <div class="input-group">
                                                <span class="input-group-addon"><i class="fa fa-plus-circle"></i></span>
                                                <input type="text" class="form-control" id="txtTaxTotal" placeholder="Total Taxes">
                                            </div>
                                        </div>


                                    </div>

                                </div>
                            </div>
                          

                        </div>

                    </div>

                    <div class="row">
                        <div class="col-xs-12">
                            <div class="pull-right">

                                <button type="button" class="btn btn-info" id="btnSave" style="margin-top:27px; width:100px; border-radius:0px;">Save</button>

                                <button type="button" class="btn btn-danger" id="btnDelete" style="margin-top:27px; width:100px; border-radius:0px;">Delete</button>

                                <button type="reset" class="btn btn-default" id="btnClear" style="margin-top:27px; width:100px; border-radius:0px;">Clear</button>

                                <button type="button" class="btn btn-success" id="btnPrint" style="margin-top:27px; width:100px; border-radius:0px;">Print</button>

                                <button type="button" class="btn btn-warning" id="btnVoucher" style="margin-top: 27px; width: 100px; border-radius:0px;">Voucher</button>

                            </div>
                        </div>
                    </div>
                </div>
                
            </section>
        </div>

    </form>










    <!-- Popup box modal start For Message -->
    <div class="modal" id="section-message" tabindex="-1" role="dialog" aria-hidden="true" style="z-index : 10000!important;">
        <div class="modal-dialog animated bounceInDown">
            <div class="modal-content">
                <div class="modal-header" id="modalMessage">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Attention</h4>
                </div>
                <div class="modal-body">

                    <h5 id="lblMessage"></h5>

                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal end -->
    @*Customer Model*@
    <div class="modal" tabindex="-1" id="CustomerModal" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" style="margin-top:60px;">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="modal123Label">Customer</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group row">
                        <label for="exampleInputuname" class="col-md-2">Search :</label>
                        <div class="col-md-10">
                            <input type="text" id="CustomerSearch" class="form-control" aria-controls="CustomerTable" placeholder="Search . . . ">
                        </div>
                    </div>CustomerSearch
                    <div class="form-group row">
                        <div class="table-responsive" style="height:350px;">
                            <table id="CustomerTable" class="table table-striped table-hover responsive">
                                <thead>
                                    <tr>
                                        <th>Sr</th>
                                        <th>Customer ID</th>
                                        <th>Customer Name</th>
                                        <th>CNIC</th>
                                        <th>Address</th>
                                        <th>Phone</th>
                                    </tr>
                                </thead>
                                <tbody style="font-size:12px; text-transform: uppercase"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    @*Payment Receipt List Model*@
    <div class="modal fade" id="ReceiptModel" tabindex="-1" role="dialog" aria-labelledby="CustomerModalLabel" aria-hidden="true" style="display: none; margin-top:50px">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title" id="CustomerModalLabel">Receipt List</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group row">
                        <label for="exampleInputuname" class="col-md-2">Search :</label>
                        <div class="col-md-10">
                            <input type="text" id="ReceiptSearch" class="form-control" aria-controls="Customer" placeholder="Search . . . ">
                        </div>
                    </div>

                    <div class="form-group row container-fluid">
                        <div class="col-md-12">
                            <div class="table-respon">
                                <table id="tblReceiptNo" class="table success color-bordered-table info-bordered-table">
                                    <thead class="bg-primary">
                                        <tr>
                                            <th>S No</th>
                                            <th>Receipt No</th>
                                            <th>Date</th>
                                            <th>Cutomer</th>
                                            <th>Trans Type</th>
                                            <th>Remarks</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                       
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger waves-effect text-left" data-dismiss="modal">Close</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    @*Cost Center List*@
    <div class="modal fade" id="CostCenterModel" tabindex="-1" role="dialog" aria-labelledby="CustomerModalLabel" aria-hidden="true" style="display: none; margin-top:50px">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title" id="CustomerModalLabel">Cost Center List</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group row">
                        <label for="exampleInputuname" class="col-md-2">Search :</label>
                        <div class="col-md-10">
                            <input type="text" id="CustomerSearch" class="form-control" aria-controls="Customer" placeholder="Search . . . ">
                        </div>
                    </div>

                    <div class="form-group row container-fluid">
                        <div class="col-md-12">
                            <div class="table-respon">
                                <table id="Item" class="table success color-bordered-table info-bordered-table">
                                    <thead class="bg-primary">
                                        <tr>
                                            <th>CS.Code</th>
                                            <th>CS.Name</th>
                                            <th>Active</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>001</td>
                                            <td>aaaa</td>
                                            <td>Y</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger waves-effect text-left" data-dismiss="modal">Close</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    @*CashBank List*@
    <div class="modal fade" id="CashBankModel" tabindex="-1" role="dialog" aria-labelledby="CustomerModalLabel" aria-hidden="true" style="display: none; margin-top:50px">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title" id="CustomerModalLabel">Cash Bank List</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group row">
                        <label for="exampleInputuname" class="col-md-2">Search :</label>
                        <div class="col-md-10">
                            <input type="text" id="CustomerSearch" class="form-control" aria-controls="Customer" placeholder="Search . . . ">
                        </div>
                    </div>

                    <div class="form-group row container-fluid">
                        <div class="col-md-12">
                            <div class="table-respon">
                                <table id="Item" class="table success color-bordered-table info-bordered-table">
                                    <thead class="bg-primary">
                                        <tr>
                                            <th>Code</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>001</td>
                                            <td>HBL</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger waves-effect text-left" data-dismiss="modal">Close</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    @*PaymentMode list*@
    <div class="modal fade" id="PaymentModeModel" tabindex="-1" role="dialog" aria-labelledby="CustomerModalLabel" aria-hidden="true" style="display: none; margin-top:50px">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title" id="CustomerModalLabel">Payment Mode List</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group row">
                        <label for="exampleInputuname" class="col-md-2">Search :</label>
                        <div class="col-md-10">
                            <input type="text" id="CustomerSearch" class="form-control" aria-controls="Customer" placeholder="Search . . . ">
                        </div>
                    </div>

                    <div class="form-group row container-fluid">
                        <div class="col-md-12">
                            <div class="table-respon">
                                <table id="Item" class="table success color-bordered-table info-bordered-table">
                                    <thead class="bg-primary">
                                        <tr>
                                            <th>Code</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>001</td>
                                            <td>B</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger waves-effect text-left" data-dismiss="modal">Close</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    @*Bank List*@
    <div class="modal fade" id="BankModel" tabindex="-1" role="dialog" aria-labelledby="CustomerModalLabel" aria-hidden="true" style="display: none; margin-top:50px">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title" id="CustomerModalLabel">Bank List</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group row">
                        <label for="exampleInputuname" class="col-md-2">Search :</label>
                        <div class="col-md-10">
                            <input type="text" id="CustomerSearch" class="form-control" aria-controls="Customer" placeholder="Search . . . ">
                        </div>
                    </div>

                    <div class="form-group row container-fluid">
                        <div class="col-md-12">
                            <div class="table-respon">
                                <table id="Item" class="table success color-bordered-table info-bordered-table">
                                    <thead class="bg-primary">
                                        <tr>
                                            <th>Bank Code</th>
                                            <th>Bank Name</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>001</td>
                                            <td>Habib Bank Ltd</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger waves-effect text-left" data-dismiss="modal">Close</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    @*Invoices List*@
    <div class="modal fade" id="AdvanceReceiptModel" tabindex="-1" role="dialog" aria-labelledby="CustomerModalLabel" aria-hidden="true" style="display: none; margin-top:50px">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title" id="InvoicesModel">Advance List</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group row">
                        <label for="exampleInputuname" class="col-md-2">Search :</label>
                        <div class="col-md-10">
                            <input type="text" id="AdvanceSearch" class="form-control" aria-controls="Advance" placeholder="Search . . . ">
                        </div>
                    </div>

                    <div class="form-group row container-fluid">
                        <div class="col-md-12">
                            <div class="table-respon">
                                <table id="tblAdvanceReceipt" class="table success color-bordered-table info-bordered-table">
                                    <thead class="bg-primary">
                                        <tr>
                                            <th>S No</th>
                                            <th>Receipt No</th>
                                            <th>Balance</th>
                                           
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger waves-effect text-left" data-dismiss="modal">Close</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    @*Receipt Head List*@
    <div class="modal fade" id="ReceiptHeadModel" tabindex="-1" role="dialog" aria-labelledby="CustomerModalLabel" aria-hidden="true" style="display: none; margin-top:50px">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title" id="CustomerModalLabel">Receipt Head List</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group row">
                        <label for="exampleInputuname" class="col-md-2">Search :</label>
                        <div class="col-md-10">
                            <input type="text" id="CustomerSearch" class="form-control" aria-controls="Customer" placeholder="Search . . . ">
                        </div>
                    </div>

                    <div class="form-group row container-fluid">
                        <div class="col-md-12">
                            <div class="table-respon">
                                <table id="Item" class="table success color-bordered-table info-bordered-table">
                                    <thead class="bg-primary">
                                        <tr>
                                            <th>Code</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>001</td>
                                            <td>11</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger waves-effect text-left" data-dismiss="modal">Close</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- Popup box modal start -->
    <div class="modal" id="section-confirm" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog animated bounceInDown">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Confirm</h4>
                </div>
                <div class="modal-body">

                    <h5>Are you sure want to save ?</h5>

                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                    <button class="btn btn-success" type="button" onclick="SaveEnquiry()">Save</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal end -->
    <div class="modal" id="section-confirm-Delete" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog animated bounceInDown">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Confirm</h4>
                </div>
                <div class="modal-body">

                    <h5>Are you sure want to Delete ?</h5>

                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                    <button class="btn btn-danger" type="button" onclick="DeleteEnquiry()">Delete</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Popup box modal start -->
    <div class="modal" id="section-message" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog animated bounceInDown">
            <div class="modal-content">
                <div class="modal-header" id="modalMessage">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Alert Message</h4>
                </div>
                <div class="modal-body">

                    <h5 id="lblMessage"></h5>

                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal end -->
</section>

<link href='@Url.Content("~/assets/plugins/select2/select2.css")' rel="stylesheet" type="text/css" media="screen" />
<link href='@Url.Content("~/assets/plugins/icheck/skins/minimal/blue.css")' rel="stylesheet" type="text/css" media="screen" />
<script src='@Url.Content("~/assets/js/jquery-1.11.2.min.js")' type="text/javascript"></script>
<script src='@Url.Content("~/assets/plugins/select2/select2.min.js")' type="text/javascript"></script>
<script src='@Url.Content("~/assets/plugins/icheck/icheck.min.js")' type="text/javascript"></script>
@* Search Modal *@
<script>
    
    $(document).ready(function () {

        $("#ReceiptSearch").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#tblReceiptNo tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
    });
    $(document).ready(function () {
       
        $("#AdvanceSearch").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#tblAdvanceReceipt tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });});
    
        $(document).ready(function () {
            $("#CustomerSearch").on("keyup", function () {
                var value = $(this).val().toLowerCase();
                $("#CustomerTable tr").filter(function () {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
            });
        });
        $(document).ready(function () {
            $("#txtRecDate").datepicker({
                dateFormat: "dd-mm-yy"
            });
            $("#txtOEMDate").datepicker({
                dateFormat: "dd-mm-yy"
            });
            var today = new Date();
            var dd = today.getDate();
            var mm = today.getMonth() + 1; //January is 0!
            var yyyy = today.getFullYear();

            if (dd < 10) {
                dd = '0' + dd
            }

            if (mm < 10) {
                mm = '0' + mm
            }

            //today = mm + '/' + dd + '/' + yyyy;
            today = dd + '-' + mm + '-' + yyyy;
            
            $("#txtReceiptDate").val(today);
            $("#xtInsDate").val(today);
        });
</script>


@*/// Tax Receipt*@ 
<script>
    var rowCount = 1;
    var dataCount = 1;
    var SNo = 0;
    $("#ddlTaxHead").change(function () {
        
        var type = $("#ddlTaxHead :selected").text();
        var service = type.split("| ")[0];
        var account = type.split("| ")[1];
       
        $('#txtTaxPer').val(account);

    });
    function clearTax(value) {
        $('#ddlTaxHead').val("0");
        $('#txtTaxPer').val("0");
        $('#txtTaxAmount').val("0");
    }  
    function AddTax(value) {
        var TaxID = $('#ddlTaxHead').val();
        var type = $("#ddlTaxHead :selected").text();
        var TaxDesc = type.split("| ")[0];
        var TaxPer = $('#txtTaxPer').val();
        var TaxAmount = $('#txtTaxAmount').val();
        if (TaxID == "0") {
            $("#modalMessage").css("background-color", "#e46457");
            $("#lblMessage").text("Please Select Anyone Tax");
            $("#section-message").modal('show');

            return;
        }
        if (TaxAmount == "0") {
            $("#modalMessage").css("background-color", "#e46457");
            $("#lblMessage").text("Tax Amount Cant be Zero");
            $("#section-message").modal('show');

            return;
        }
        var row = $(value).parent().parent().html();
        var dt = $("#tblTaxDetail tbody").append('<tr id="fixedRowTax' + (rowCount++) + '" data-tr-count="' + (dataCount++) + '">' +
                                                    '<td>' + SNo++ + '</td>' +
                                                    '<td> <label id="lblTaxID">' + TaxID + ' </label></td>' +
                                                    '<td> <label id="lblTaxHead">' + TaxDesc + ' </label></td>' +
                                                    '<td> <label id="lblTaxPer">' + TaxPer + ' </label></td>' +
                                                    '<td> <label id="lblTaxAmount">' + TaxAmount + ' </label></td>' +

                                                  
                                                    '<td style="text-align:center;">' +
                                                        '<a class= "deleteTaxRow" style="color:blue" ><i class="fa fa-trash"></i></a></td>' +
                                                    '</tr>');


        clearTax(value);
        calculateTaxTotal();
    }
    function calculateTaxTotal() {
        var total = 0;
        $("#tblTaxDetail tbody tr").each(function () {
            var TaxID = $(this).closest('tr').find('#lblTaxID').text().trim();
            var amount = $(this).closest('tr').find('#lblTaxAmount').text().trim();
            if (TaxID != "") {
                total = total + parseFloat(amount);
            }
            

        });
        $("#txtTaxTotal").val(total);
        CalculateTotalAmount();
    }
    $("table#tblTaxDetail").on('click', '.deleteTaxRow', function () {
        rIndex = $(this).closest('tr');
        index = $(this).closest('tr')[0].rowIndex;
        $(this).closest('tr').remove();
        calculateTaxTotal();

    });

    function ChangeColor(value) {

        if ($(value).val() != '')
            $(value).css("border-color", "#e1e1e1");
    }
</SCRIPT>
@* Payment  *@

<script>
    
    $("#chkAdv").change(function () {
        if (chkAdv.checked) {
            
            
           
            $("#txtAdvanceAmount").prop('disabled', false);
            Get_CustomerAdvanceData();
        }
        else {
            $("#txtAdvanceReceiptNo").prop('disabled', true);
            $("#txtAdvanceAmount").prop('disabled', true);
            $("#txtAdvanceReceiptNo").val("");
            $("#txtAdvanceAmount").val(0);
            CalculateTotalAmount();
            $("#tblAdvanceReceipt tbody tr").remove();
        }


    })

</script>
@* Master Level Work  *@
<script>
    $(document).ready(function () {

        Get_CustomerModalData();
        Get_ReceiptNo();
    })
    function Get_CustomerModalData() {

        var rowCount = 1;
        var dataCount = 1;
        var SNo = 1;

        $.ajax({
            dataType: "json",
            async: true,
            type: 'GET',
            url: '@Url.Content("~/BookingOrder/Select_CustomerDetailModal")',
            success: function (data) {

                if (data.Success == true) {
                    var item = JSON.parse(data.Response)
                    $("#CustomerTable tbody tr").remove()
                    if (item.length > 0) {

                        $.each(item, function (value, item) {

                            var temp = '<tr id="DelChkListRow1' + (rowCount++) + '" data-tr-count="' + (dataCount++) + '" onclick="IssueFunc(this)">' +
                                '<td>' + SNo++ + '</td>' +
                          '<td class="tdDiv" style="overflow:auto"><label id="lblCusCode">' + item.CusCode + '</label><input type="hidden" id="hdnCusCode" value="' + item.CusCode + '"/></td>' +
                          '<td class="tdDiv" style="overflow:auto"><label id="lblCusDesc">' + item.CusDesc + '</label></td>' +
                          '<td class="tdDiv" style="overflow:auto"><label id="lblNIC">' + item.NIC + '</label></td>' +
                          '<td class="tdDiv" style="overflow:auto"><label id="lblAddress">' + item.Address1 + '</label></td>' +
                          '<td class="tdDiv" style="overflow:auto"><label id="lblPhone">' + item.Phone1 + '</label></td>' +
                            '</tr>';

                            $("#CustomerTable tbody").append(temp);


                        });

                    }
                }
            },
            complete: function () {

            },
        });
    }
    function Get_ReceiptNo() {

        var rowCount = 1;
        var dataCount = 1;
        var SNo = 1;

        $.ajax({
            dataType: "json",
            async: true,
            type: 'GET',
            url: '@Url.Content("~/SaleOrder/GetReceiptNo_Model")',
            success: function (data) {

                if (data.Success == true) {
                    var item = JSON.parse(data.Response)
                    $("#tblReceiptNo tbody tr").remove()
                    if (item.length > 0) {

                        $.each(item, function (value, item) {

                            var temp = '<tr id="DelChkListRow1' + (rowCount++) + '" data-tr-count="' + (dataCount++) + '" onclick="ReceiptFunc(this)">' +
                                '<td>' + SNo++ + '</td>' +
                          '<td class="tdDiv" style="overflow:auto"><label id="lblRecNo">' + item.ReceiptNo + '</label><input type="hidden" id="hdnCusCode" value="' + item.CusCode + '"/></td>' +
                          '<td class="tdDiv" style="overflow:auto"><label id="lblRecDate">' + item.ReceiptDate + '</label></td>' +
                          '<td class="tdDiv" style="overflow:auto"><label id="lblCustomer">' + item.CusDesc + '</label></td>' +
                          '<td class="tdDiv" style="overflow:auto"><label id="lblTransType">' + item.TransType + '</label></td>' +
                          '<td class="tdDiv" style="overflow:auto"><label id="lblRemarks">' + item.Remarks + '</label></td>' +
                            '</tr>';

                            $("#tblReceiptNo tbody").append(temp);


                        });

                    }
                }
            },
            complete: function () {

            },
        });
    }
        function Get_CustomerAdvanceData() {

            var rowCount = 1;
            var dataCount = 1;
            var SNo = 1;
            var cuscode=$("#txtCusCode").val();
            $.ajax({
                dataType: "json",
                async: true,
                type: 'GET',
                url: '@Url.Content("~/SaleOrder/GetAdvanceReceipt")',
                data: { EnquiryId :cuscode},
                success: function (data) {
                    var i = 0;
                    if (data.Success == true) {
                        var item = JSON.parse(data.Response)
                        $("#tblAdvanceReceipt tbody tr").remove();
                        if (item.length > 0) {
                            i++;
                            $.each(item, function (value, item) {


                                var temp = '<tr id="DelChkListRow1' + (rowCount++) + '" data-tr-count="' + (dataCount++) + '" onclick="AdvanceFunc(this)">' +
                                    '<td>' + i + '</td>' +
                              '<td class="tdDiv" style="overflow:auto"><label id="lblAdvReceipt">' + item.ReceiptNo + '</label></td>' +
                              '<td class="tdDiv" style="overflow:auto"><label id="lblBalance">' + item.Balance + '</label></td>' +

                                '</tr>';

                                $("#tblAdvanceReceipt tbody").append(temp);


                            });

                        }
                    }
                },
                complete: function () {

                },
            });
        }
    
    //Search Model End
    IssueFunc = function (value) {

        var CusCode = $(value).closest('tr').find("#hdnCusCode").val();
        var CusDesc = $(value).closest('tr').find('#lblCusDesc').text();

        document.getElementById("txtCusCode").value = CusCode;
        document.getElementById("txtCusDesc").value = CusDesc;
        $("#ddlCustomers").css("border-color", "#e1e1e1");

        $("#CustomerModal").modal("hide");
    }
    AdvanceFunc=function (value){
        var Advance = $(value).closest('tr').find("#lblAdvReceipt").text();
        var Balance = $(value).closest('tr').find('#lblBalance').text();
        
        
        document.getElementById("txtAdvanceReceiptNo").value = Advance;
        document.getElementById("txtAdvanceAmount").value = Balance;
        CalculateTotalAmount();
        $("#ddlCustomers").css("border-color", "#e1e1e1");
        
        $("#AdvanceReceiptModel").modal("hide");
    }
    $("#ddlTransType").change(function () {
        loadInvoiceType();
       
       
    });

    function loadInvoiceType() {
        var type = $("#ddlTransType").val();
        var x = document.getElementById("ddlInvType");
        var option = document.createElement("option");
        if (type == "Advance") {
            $("#ddlInvType").empty();


            option.value = "Booking";
            option.innerHTML = "Booking";
            x.add(option);
            option = document.createElement("option");
            option.value = "CSI";
            option.innerHTML = "SaleInvoice";
            x.add(option);
            option = document.createElement("option");
            option.value = "ASC";
            option.innerHTML = "Services Against Vehicle";
            x.add(option);
        }
        else {
            $("#ddlInvType").empty();

            option = document.createElement("option");
            option.value = "CSI";
            option.innerHTML = "SaleInvoice";
            x.add(option);
            option = document.createElement("option");
            option.value = "ASC";
            option.innerHTML = "Services Against Vehicle";
            x.add(option);
        }
    }


</script>
@* Print Option *@
<script>
      $("#btnPrint").click(function () {

                    var baseurl = '@Url.Action("PRExport")';
          var url = baseurl + '?ReceiptNo=' + $('#txtReceiptNo').val() + '&DealerCode=@Session["DealerCode"].ToString()';
                    //window.location.href = url;
                    window.open(url, '_blank');

                })
</script>
@* Pending Payment  *@
<script>

    function loadInvoices() {
       
        var TransType = $("#ddlTransType").val();
        var InvType = $("#ddlInvType").val();
        if (TransType == "Customer") {
            if (InvType == "CSI") {
                GETCSIPendingPayment();
            }
           else if (InvType == "ASC") {
                GETASCPendingPayment();
            }
        }
    }
    function GETCSIPendingPayment() {

        var rowCount = 1;
        var dataCount = 1;
        var SNo = 1;
        var CusCOde = $("#txtCusCode").val();
        var out = 0;
        $.ajax({
            dataType: "json",
            async: true,
            type: 'GET',
            url: '@Url.Content("~/SaleOrder/Select_CSIPendingPay")',
            data:{ EnquiryId:CusCOde},
            success: function (data) {
                var i = 0;
                if (data.Success == true) {
                    var item = JSON.parse(data.Response)
                    $("#tblInvoice tbody tr").remove()
                    if (item.length > 0) {
                        i++;
                        $.each(item, function (value, item) {

                            var row = '<tr><td><input type="checkbox" id="chkInv" class="checkbox-inline" onchange="CalculateTotalOutStanding(this)"></td><td>' + item.RefNo +
                                             '</td><td>' + item.RefDate + '</td><td style="text-align:right">' + item.RefAmount + '</td><td id="tdOut" style="text-align:right">' + item.OutStanding +
                                             '</td><td style="text-align:right">' + 0 + '</td><td style="text-align:right">' + 0 +
                                             '</td><td style="text-align:center"><a class="selectInvoice"><i class="fa fa-edit" style="color:blue"></i></a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class= "deleteInvoice" style="color:blue" ><i class="fa fa-trash"></i></a></td>';
                            //'<tr class="GetInvoice"><td> ' + obj.PaymentNo + ' </td> <td> ' + PaymentDate + ' </td> <td> ' + obj.VendorDesc + ' </td> <td> ' + obj.InsAmount + ' </td> </tr>';
                            $("#tblInvoice tbody").append(row);

                           // out = out +parseFloat (item.OutStanding)
                        });

                    }
                }
            },
            complete: function () {
              //  $("#txtOutStanding").val(out);
            },
        });

    }
    function GETASCPendingPayment() {

        var rowCount = 1;
        var dataCount = 1;
        var SNo = 1;
        var CusCOde = $("#txtCusCode").val();
        var out = 0;
        $.ajax({
            dataType: "json",
            async: true,
            type: 'GET',
            url: '@Url.Content("~/SaleOrder/Select_ACSPendingPay")',
            data: { EnquiryId: CusCOde },
            success: function (data) {
                var i = 0;
                if (data.Success == true) {
                    var item = JSON.parse(data.Response)
                    $("#tblInvoice tbody tr").remove()
                    if (item.length > 0) {
                        i++;
                        $.each(item, function (value, item) {

                            var row = '<tr><td><input type="checkbox" id="chkInv" class="checkbox-inline" onchange="CalculateTotalOutStanding(this)"></td><td>' + item.RefNo +
                                             '</td><td>' + item.RefDate + '</td><td style="text-align:right">' + item.RefAmount + '</td><td id="tdOut" style="text-align:right">' + item.OutStanding +
                                             '</td><td style="text-align:right">' + 0 + '</td><td style="text-align:right">' + 0 +
                                             '</td><td style="text-align:center"><a class="selectInvoice"><i class="fa fa-edit" style="color:blue"></i></a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class= "deleteInvoice" style="color:blue" ><i class="fa fa-trash"></i></a></td>';
                            //'<tr class="GetInvoice"><td> ' + obj.PaymentNo + ' </td> <td> ' + PaymentDate + ' </td> <td> ' + obj.VendorDesc + ' </td> <td> ' + obj.InsAmount + ' </td> </tr>';
                            $("#tblInvoice tbody").append(row);

                            // out = out +parseFloat (item.OutStanding)
                        });

                    }
                }
            },
            complete: function () {
                //  $("#txtOutStanding").val(out);
            },
        });

    }
    $("#txtInsAmount").change(function () {
        CalculateTotalOutStanding();

    });
    function CalculateTotalOutStanding(value) {


        var TotalOut = $("#txtOutStanding").val();
        var Total = 0;

        if (TotalOut == "" || TotalOut == NaN || TotalOut == undefined) {
            Total = 0;
        }
        
        $("#tblInvoice tbody tr").each(function () {

            var check = $(this).closest('tr').find('#chkInv').prop('checked');
            var TotalOut = $(this).closest('tr').find('td:eq(4)').text().replace(/\s+/g, " ");
            

            if (TotalOut == "" || TotalOut == NaN || TotalOut == undefined) {
                TotalOut = 0;
            }
            if (check) {

                Total = Total + parseFloat(TotalOut);
            }
        });
        $("#txtOutStanding").val(Total);
      
    }
    function CalculateTotalOutStanding(value) {


        var TotalOut = $("#txtOutStanding").val();
        var Total = 0;

        if (TotalOut == "" || TotalOut == NaN || TotalOut == undefined) {
            Total = 0;
        }

        $("#tblInvoice tbody tr").each(function () {

            var check = $(this).closest('tr').find('#chkInv').prop('checked');
            var TotalOut = $(this).closest('tr').find('td:eq(4)').text().replace(/\s+/g, " ");


            if (TotalOut == "" || TotalOut == NaN || TotalOut == undefined) {
                TotalOut = 0;
            }
            if (check) {

                Total = Total + parseFloat(TotalOut);
            }
        });
        $("#txtOutStanding").val(Total);

    }
    function CalculateTotalInvoices(value) {


      
        var Total = 0;

        

        $("#tblInvoice tbody tr").each(function () {

            var check = $(this).closest('tr').find('#chkInv').prop('checked');
            var TotalOut = $(this).closest('tr').find('td:eq(3)').text().replace(/\s+/g, " ");


            if (TotalOut == "" || TotalOut == NaN || TotalOut == undefined) {
                TotalOut = 0;
            }
            if (check) {

                Total = Total + parseFloat(TotalOut);
            }
        });
        
        $("#txtInvoices").val(Total);

    }
    function CalculateTotalAdjustment(value) {



        var Total = 0;



        $("#tblInvoice tbody tr").each(function () {

            var check = $(this).closest('tr').find('#chkInv').prop('checked');
            var TotalOut = $(this).closest('tr').find('td:eq(5)').text().replace(/\s+/g, " ");


            if (TotalOut == "" || TotalOut == NaN || TotalOut == undefined) {
                TotalOut = 0;
            }
            if (check) {

                Total = Total + parseFloat(TotalOut);
            }
        });
        
        $("#txtAdjustment").val(Total);

    }
</script>

@* Calculate Total Amount Paid  *@
<script>
    $("#txtInsAmount").change(function () {
        CalculateTotalAmount();

    });
    $("#txtAdvanceAmount").change(function () {
        CalculateTotalAmount();

    });
    $("#txtTaxTotal").change(function () {
        CalculateTotalAmount();

    });
    function CalculateTotalAmount() {
        $("hdnadj").val("f");
        var InstrumentAmount = $("#txtInsAmount").val();
        var AdvanceAmount = $("#txtAdvanceAmount").val();
        var TotalTax = $("#txtTaxTotal").val();
        var Total = 0;
        if(InstrumentAmount==""||InstrumentAmount==NaN || InstrumentAmount==undefined){
            InstrumentAmount=0;
        }
        if (AdvanceAmount == "" || AdvanceAmount == NaN || AdvanceAmount == undefined) {
            AdvanceAmount = 0;
        }
        if (TotalTax == "" || TotalTax == NaN || TotalTax == undefined) {
            TotalTax = 0;
        }
        Total = parseFloat(InstrumentAmount) + parseFloat(AdvanceAmount) + parseFloat(TotalTax);
        $("#txtTotalAmount").val(Total);
        
    }

</script>

@* Auto Adjustment *@
<script>
    function ChangeInsAmount() {

        
        var TOtalAmount = $("#txtTotalAmount").val();
        var Outstanding = $("#txtOutStanding").val();
        if (parseFloat(TOtalAmount) > parseFloat(Outstanding)) {
            alert('Input Amount ' + TOtalAmount + ' is Greater than Outstanding amount');
            $("#txtTotalAmount").val(0);
            $("hdnadj").val("f");
            return;
        }
    }
        function EmptyInvoice() {
            var row = '<tr class=""><td colspan="8" style="text-align:center">NO RECORD</td> </tr>'
            $("#tblInvoice tbody").append(row);
        }
        $("#btnautoAdjust").click(function () {
            ChangeInsAmount();
            var InvAmount = 0;
            var OutSTTotal = 0;
            var Remaining = 0;
            var table = document.getElementById('tblInvoice');
            var len = table.rows.length;
            var rows = table.rows;
            var firstRow = rows[1];
            var NFound = '';
            if (firstRow != undefined) {
                NFound = firstRow.cells[0].innerHTML;
            }
            else {
                EmptyInvoice();
                NFound = "1";
            }
            NFound = NFound.trim();
            if (NFound.substring(0, 2) === 'NO') {
                alert('Invoice table should not be empty!');
            }
            else {
                var IPTotal = document.getElementById('txtTotalAmount').value;
                if (IPTotal === '') {
                    alert('Total amount should not be zero!');
                }
                else {

                    for (var i = 1; i < len ; i++) {
                        InvAmount = parseFloat(table.rows[i].cells[3].innerHTML.trim());
                        OutSTTotal = parseFloat(table.rows[i].cells[4].innerHTML.trim());
                        var AdjAmount = parseFloat(table.rows[i].cells[5].innerHTML.trim());
                        if (parseFloat(IPTotal) > parseFloat(OutSTTotal)) {
                            table.rows[i].cells[5].innerHTML = OutSTTotal;
                            IPTotal = parseFloat(IPTotal) - parseFloat(OutSTTotal);
                            table.rows[i].cells[6].innerHTML = 0;
                        }
                        else {
                            table.rows[i].cells[5].innerHTML = IPTotal;
                            table.rows[i].cells[6].innerHTML = parseFloat(OutSTTotal) - parseFloat(IPTotal);
                            if (parseFloat(table.rows[i].cells[6].innerHTML) > parseFloat(0)) {
                                calcTotal(table);
                                return;
                            }
                            IPTotal = 0;
                        }
                    }
                }
            }
            calcTotal(table);
            $("hdnadj").val("t");
        });
        // Validation
        // Calculate the total amount from Invoice Table
        function calcTotal(table) {
            // Total Amount of Table data
            var InvTotal = 0;
            var OutSTTotal = 0;
            var InvAdjTotal = 0;
            $("hdnadj").val("t");
            var len = table.rows.length;
            var rows = table.rows;
            var firstRow = rows[1];
            var NFound = '';
            if (firstRow != undefined) {
                NFound = firstRow.cells[0].innerHTML;
            }
            else {
                EmptyInvoice();
                NFound = "1";
            }
            NFound = NFound.trim();

            if (NFound.substring(0, 2) === 'NO') {
                $("#txtInvoices").val(InvTotal.toFixed(4));
                $("#txtOutStanding").val(OutSTTotal.toFixed(4));
                $("#txtAdjustment").val(InvAdjTotal.toFixed(4));
            }
            else {
                for (var i = 1; i < len ; i++) {
                    InvTotal += parseFloat(table.rows[i].cells[3].innerHTML.trim());
                    OutSTTotal += parseFloat(table.rows[i].cells[4].innerHTML.trim());
                    InvAdjTotal += parseFloat(table.rows[i].cells[5].innerHTML.trim());
                }
                $("#txtInvoices").val(InvTotal.toFixed(4));
                $("#txtOutStanding").val(OutSTTotal.toFixed(4));
                $("#txtAdjustment").val(InvAdjTotal.toFixed(4));
            }
        }
        //  compare invoice amount with adjutment amount
        function checkInvAmt() {
            var isEmpty = false,
           
                InvoiceAmount = document.getElementById('txtInvoices').value,
                AdjustmentAmt = document.getElementById('txtAdjustment').value;

            if (parseFloat(AdjustmentAmt) > parseFloat(InvoiceAmount)) {
                alert('Adjustment amount should not be greater than invoice amount or outstanding.');
                $("hdnadj").val("f");
                isEmpty = true;
            }
            return isEmpty;
        }
    
</script>

@* Save Data  *@
<script>
   function ValidateDetails() {


        var count = 0;

        var check = false;

        var txtCusCode = $("#txtCusCode").val();
        var txtTotalAmount = $("#txtTotalAmount").val();
        var ddlInvType = $("#ddlInvType").val();
        var ddlTransType = $("#ddlTransType").val();


        if (ddlTransType == "0") {
            $("#ddlTransType").css("border-color", "red");
            $('html, body').animate({
                scrollTop: $("#ddlTransType").scrollTop(500)
            }, 800);
            count++;
        }
        else {
            $("#ddlTransType").css("border-color", "#ccc");
        }
        if (ddlInvType == "0" || ddlInvType == null) {
            $("#ddlInvType").css("border-color", "red");
            count++;
        }
        if (ddlInvType == "0" || ddlInvType == null) {
            $("#ddlInvType").css("border-color", "red");
            count++;
        }
        if (txtCusCode == "" || txtCusCode == undefined) {
            $("#txtCusCode").css("border-color", "red");
            count++;
        }
        if (txtTotalAmount == "" || txtTotalAmount == null || txtTotalAmount == "0") {
            $("#txtTotalAmount").css("border-color", "red");
            count++;
        }


        if (count > 0) {
            $("#lblMessage").text("Please fill the Required (*) feilds");
            $("#section-message").modal("show");
            return false;
        }
        else {
            return true;
        }



   }
   function checkFIFO() {

       var hdnadj = $("#hdnadj").val();
       var ddlTransType = $("#ddlTransType").val();
       if (ddlTransType != "Advance") {

           if (hdnadj == "f") {
               $("#lblMessage").text("Please Adjust Invoice First");
               $("#section-message").modal("show");
               return false;
           }
           else {
               return true;
           }
       }
       else {
           return true;
       }


   }

   $("#btnSave").click(function () {
       var check = ValidateDetails();

       if (check == true) {
           var ajd = checkFIFO();
           if (ajd == true) {
               $("#section-confirm").modal("show");
           }
       }
       $("#section-confirm").modal("show");


   });
   function SaveEnquiry(){
       var dto = {};
       dto.DealerCode = "@Session["DealerCode"].ToString()";
       dto.ReceiptNo = $("#txtReceiptNo").val();
       dto.ReceiptDate = $("#txtReceiptDate").val();
       dto.InvoiceType = $("#ddlInvType").val();
       dto.CusCode = $("#txtCusCode").val();
       dto.Remarks = $("#txtRemarks").val();
       dto.PayModeCode = $("#ddlPayMode").val();
       dto.InsNo = $("#txtInsNo").val();
       dto.InsDate = $("#txtInsDate").val();
       dto.AmountPaid = $("#txtInsAmount").val();
       dto.BankCode = $("#ddlBank").val();
       dto.Branch = $("#txtBranch").val();
       dto.AdvanceReceiptNo = $("#txtAdvanceReceiptNo").val();
       dto.AdvanceAmount = $("#txtAdvanceAmount").val();
       dto.InvTotal = $("#txtInvoices").val();
       dto.OutSTTotal = $("#txtOutStanding").val();
       dto.InvAdjTotal = $("#txtAdjustment").val();
       dto.TransType = $("#ddlTransType").val();

       if (chkAdv.checked) {
           dto.IsAdjustAdvance = "Y";
       } else {
           dto.IsAdjustAdvance = "N";
       }
       var objects = [];

     
       $.ajax({

           dataType: "json",
           async: true,
           type: 'Post',
           url: '@Url.Content("~/SaleOrder/Insert_PaymentReceiptMaster")',
           data:dto,
           success: function (data) {

               if (data) {
                   if (data.Success == true) {
                       saveDetailInv();
                   }
                   else {
                       $("#section-confirm").modal("hide")
                       $("#modalMessage").css("background-color", "#e46457");
                       $("#lblMessage").text(data.Message)
                       $("#section-message").modal('show');
                   }
               }
           },
           complete: function () {

           },
           error: function (data) {
               $("#section-confirm").modal("hide")
               $("#modalMessage").css("background-color", "#e46457");
               $("#lblMessage").text(data.Message)
               $("#section-message").modal('show');
           }
       });

   }
    function saveDetailInv() {

        var objects = [];

        objects = JSON.stringify({ 'objects': InvoiceRows() });
        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: "json",
          //  async: true,
            type: 'Post',
            url: '@Url.Content("~/SaleOrder/Insert_PaymentReceiptDetail")',
            data: objects,
            success: function (data) {

                if (data) {
                    if (data.Success == true) {
                        saveDetailTax();
                    }
                    else {
                        $("#section-confirm").modal("hide")
                        $("#modalMessage").css("background-color", "#e46457");
                        $("#lblMessage").text(data.Message)
                        $("#section-message").modal('show');
                    }
                }
            },
            complete: function () {

            },
            error: function (data) {
                $("#section-confirm").modal("hide")
                $("#modalMessage").css("background-color", "#e46457");
                $("#lblMessage").text(data.Message)
                $("#section-message").modal('show');
            }
        });
    }
    function saveDetailTax() {

        var objectTax = [];
        
        objectTax = JSON.stringify({ 'objectTax': TaxRows() });
        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: "json",
           // async: true,
            type: 'Post',
            url: '@Url.Content("~/SaleOrder/Insert_PaymentReceiptTax")',
            data: objectTax,
            success: function (data) {

                if (data) {
                    if (data.Success == true) {
                        $("#section-confirm").modal("hide")
                        $("#modalMessage").css("background-color", "#64c344");
                        $("#lblMessage").text(data.Message)
                        $("#section-message").modal('show');
                    }
                    else {
                        $("#section-confirm").modal("hide")
                        $("#modalMessage").css("background-color", "#e46457");
                        $("#lblMessage").text(data.Message)
                        $("#section-message").modal('show');
                    }
                }
            },
            complete: function () {

            },
            error: function (data) {
                $("#section-confirm").modal("hide")
                $("#modalMessage").css("background-color", "#e46457");
                $("#lblMessage").text(data.Message)
                $("#section-message").modal('show');
            }
        });
    }
   
  
    var InvoiceTable = [];
    var TaxTable = [];
    var tableInvoice = document.getElementById('tblInvoice');
    var tableTax = document.getElementById('tblTaxDetail');
    function InvoiceRows() {
        invoiceCount = 0;
        
        $("table#tblInvoice").find('tr').each(function () {
        
            if (invoiceCount != 0) {
                var itemList = $(this).find("td");
                // check empty row
                var rows = tableInvoice.rows;
                var firstRow = rows[1];
                var NFound = '';
                var InvType = '';
                if (firstRow != undefined) {
                    NFound = firstRow.cells[0].innerHTML;
                }
                else {
                    NFound = "1";
                }
                NFound = NFound.trim();
                if (NFound.substring(0, 2) != 'NO') {
                    if ($("#ddlInvType").val() == "CSI") {
                        InvType = "CSI";
                    }
                    else if ($("#ddlInvType").val() == "ASC") {
                        InvType = "ASC";
                    }
                    debugger
                    var chk = $(this).closest('tr').find('#chkInv').prop('checked');
                    if (chk == true) {
                        var invoice = {
                            InvoiceNo: $(itemList[1]).html().trim(), InvoiceDate: $(itemList[2]).html().trim(), InvAmount: $(itemList[3]).html().trim(), OutStAmount: $(itemList[4]).html().trim(),
                            AdjAmount: $(itemList[5]).html().trim(),
                            
                            InvoiceType: InvType
                        };
                        InvoiceTable.push(invoice);
                    }
                   
                }
            }
            invoiceCount++;
        })
        return InvoiceTable;
    }
    function TaxRows() {
    debugger
        var tableTax = document.getElementById('tblTaxDetail');
        taxCount = 0;

        $("#tblTaxDetail tbody tr").each(function () {
            if (taxCount != 0) {
                var itemList = $(this).find("td");
                debugger
                // check empty row
                var rows = tableTax.rows;
                var firstRow = rows[1];
                var NFound = '';
                if (firstRow != undefined) {
                    NFound = "0"
                }
                else {
                    NFound = "1";
                }
                NFound = NFound.trim();
                if (NFound.substring(0, 2) != 'NO') {
                    var tax = {
                             ReceiptHead: $(itemList[2]).find('#lblTaxHead').text(), Amount: $(itemList[4]).find('#lblTaxAmount').text(), TaxID: $(itemList[1]).find('#lblTaxID').text(),
                               TaxPerc: $(itemList[3]).find('#lblTaxPer').text()
                    };
                    TaxTable.push(tax);
                }
            }
            taxCount++;
        })
        return TaxTable;
    }

    function CheckTaxTable() {
        var isEmpty = false;
        //var tableInvoice = document.getElementById('Invoice2');
        var tableTax = document.getElementById('Tax');
        var rows = tableTax.rows;
        var firstRow = rows[1];
        var NFound = '';
        if (firstRow != undefined) {
            NFound = firstRow.cells[0].innerHTML;
        }
        else {
            NFound = "1";
        }
        NFound = NFound.trim();
        if (NFound.substring(0, 2) === 'NO') {
            alert("Receipt head table should not be empty.");
            isEmpty = true;
        }
        return isEmpty;
    }

</script>

@* Get Record After Save *@
<script>
    function Get_ReceiptNo() {

        var rowCount = 1;
        var dataCount = 1;
        var SNo = 1;

        $.ajax({
            dataType: "json",
            async: true,
            type: 'GET',
            url: '@Url.Content("~/SaleOrder/GetReceiptNo_Model")',
            success: function (data) {

                if (data.Success == true) {
                    var item = JSON.parse(data.Response)
                    $("#tblReceiptNo tbody tr").remove()
                    if (item.length > 0) {

                        $.each(item, function (value, item) {

                            var temp = '<tr id="DelChkListRow1' + (rowCount++) + '" data-tr-count="' + (dataCount++) + '" onclick="ReceiptFunc(this)">' +
                                '<td>' + SNo++ + '</td>' +
                          '<td class="tdDiv" style="overflow:auto"><label id="lblRecNo">' + item.ReceiptNo + '</label><input type="hidden" id="hdnCusCode" value="' + item.CusCode + '"/></td>' +
                          '<td class="tdDiv" style="overflow:auto"><label id="lblRecDate">' + item.ReceiptDate + '</label></td>' +
                          '<td class="tdDiv" style="overflow:auto"><label id="lblCustomer">' + item.CusDesc + '</label></td>' +
                          '<td class="tdDiv" style="overflow:auto"><label id="lblTransType">' + item.TransType + '</label></td>' +
                          '<td class="tdDiv" style="overflow:auto"><label id="lblRemarks">' + item.Remarks + '</label></td>' +
                            '</tr>';

                            $("#tblReceiptNo tbody").append(temp);


                        });

                    }
                }
            },
            complete: function () {

            },
        });
    }
    function ReceiptFunc(value) {
        var CusCode = $(value).closest('tr').find("#hdnCusCode").text();
        var ReceiptDate = $(value).closest('tr').find('#lblRecDate').text();
        var ReceiptNo = $(value).closest('tr').find('#lblRecNo').text();
        var CusDesc = $(value).closest('tr').find("#lblCustomer").text();
        var Transtype = $(value).closest('tr').find("#lblTransType").text();
        var Remarks = $(value).closest('tr').find("#lblRemarks").text();
       

        document.getElementById("txtCusCode").value = CusCode;
        document.getElementById("txtCusDesc").value = CusDesc;
        document.getElementById("txtReceiptNo").value = ReceiptNo;
        document.getElementById("txtReceiptDate").value = ReceiptDate;
        document.getElementById("ddlTransType").value = Transtype;
        document.getElementById("txtRemarks").value = Remarks;
        $("#txtCusDesc").css("border-color", "#e1e1e1");
        
        $("#ReceiptModel").modal("hide");
        getMasterDetail(ReceiptNo);

    }
    function getMasterDetail(leadId) {

        var leadIds = leadId;


        if (leadId != "0") {
            $.ajax({
                dataType: "json",
                async: true,
                type: 'GET',
                url: '@Url.Content("~/SaleOrder/GetReceiptNo_Master")',
                data: { 'EnquiryId': leadIds },
                success: function (data) {

                    if (data.Success == true) {
                        var item = JSON.parse(data.Response)

                        //Event Information
                        debugger
                        loadInvoiceType();
                        $("#ddlInvType").val(item[0].InvoiceType);
                        $("#txtVoucher").val(item[0].VoucherNo);
                        if (item[0].IsAdjustAdvance == "Y") {
                            chkAdv.checked = true;
                        }
                        
                        $("#txtAdvanceReceiptNo").val(item[0].AdvanceReceiptNo);
                        $("#txtAdvanceAmount").val(item[0].AdvanceAmount);
                        $("#txtTotalAmount").val(item[0].InvAdjTotal);
                        $("#txtTotalAmount").val(item[0].InvAdjTotal);
                        

                        $("#ddlPayMode").val(item[0].PayModeCode);
                        $("#ddlBank").val(item[0].BankCode);
                        $("#txtBranch").val(item[0].Branch);
                        $("#txtInsNo").val(item[0].InsNo);
                        $("#txtInsDate").val(item[0].InsDate);
                        $("#txtInsAmount").val(item[0].AmountPaid);
                        

                        GETReceiptDetail(leadId);


                    }
                },
                complete: function () {


                },
            });

        }
    }
    function GETReceiptDetail(leadId) {
        var recno = leadId;
        var rowCount = 1;
        var dataCount = 1;
        var SNo = 1;
        
        var out = 0;
        $.ajax({
            dataType: "json",
            async: true,
            type: 'GET',
            url: '@Url.Content("~/SaleOrder/GetReceiptNo_Detail")',
            data: { EnquiryId: recno },
            success: function (data) {
                var i = 0;
                if (data.Success == true) {
                    var item = JSON.parse(data.Response)
                    $("#tblInvoice tbody tr").remove()
                    if (item.length > 0) {
                        i++;
                        //parseFloat(item.OutStAmount) - parseFloat(item.AdjAmount)
                        $.each(item, function (value, item) {
                        debugger
                           
                            var row = '<tr><td><input type="checkbox" id="chkInv" checked="true" disabled class="checkbox-inline" onchange="CalculateTotalOutStanding(this)"></td><td>' + item.InvoiceNo +
                                      '</td><td>' + item.InvoiceDate + '</td><td style="text-align:right">' + item.InvAmount + '</td><td id="tdOut" style="text-align:right">' + item.OutStAmount +
                                      '</td><td style="text-align:right">' + item.AdjAmount + '</td><td style="text-align:right">' + item.RefAmount +
                                      '</td><td style="text-align:center"><a class="selectInvoice"><i class="fa fa-edit" style="color:blue"></i></a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class= "deleteInvoice" style="color:blue" ><i class="fa fa-trash"></i></a></td>';
                            //'<tr class="GetInvoice"><td> ' + obj.PaymentNo + ' </td> <td> ' + PaymentDate + ' </td> <td> ' + obj.VendorDesc + ' </td> <td> ' + obj.InsAmount + ' </td> </tr>';
                          
                            $("#tblInvoice tbody").append(row);

                            // out = out +parseFloat (item.OutStanding)
                        });
                        CalculateTotalOutStanding();
                        CalculateTotalAdjustment();
                        CalculateTotalInvoices();
                    }
                }
            },
            complete: function () {
                GETReceiptTaxDetail(leadId);
            },
        });

    }
    function GETReceiptTaxDetail(leadId) {
        var recno = leadId;
        var rowCount = 1;
        var dataCount = 1;
        var SNo = 1;

        var out = 0;
        $.ajax({
            dataType: "json",
            async: true,
            type: 'GET',
            url: '@Url.Content("~/SaleOrder/GetReceiptNo_TaxDetail")',
            data: { EnquiryId: recno },
            success: function (data) {
                var i = 0;
                if (data.Success == true) {
                    var item = JSON.parse(data.Response)
                    $("#tblTaxDetail tbody tr").remove()
                    if (item.length > 0) {
                        i++;
                        //parseFloat(item.OutStAmount) - parseFloat(item.AdjAmount)
                        $.each(item, function (value, item) {
                            debugger

                            var dt = $("#tblTaxDetail tbody").append('<tr id="fixedRowTax' + (rowCount++) + '" data-tr-count="' + (dataCount++) + '">' +
                                                   '<td>' + SNo++ + '</td>' +
                                                   '<td> <label id="lblTaxID">' + item.TaxID + ' </label></td>' +
                                                   '<td> <label id="lblTaxHead">' + item.ReceiptHead + ' </label></td>' +
                                                   '<td> <label id="lblTaxPer">' + item.TaxPerc + ' </label></td>' +
                                                   '<td> <label id="lblTaxAmount">' + item.Amount + ' </label></td>' +


                                                   '<td style="text-align:center;">' +
                                                       '<a class= "deleteTaxRow" style="color:blue" ><i class="fa fa-trash"></i></a></td>' +
                                                   '</tr>');

                            // out = out +parseFloat (item.OutStanding)
                        });
                       
                    }
                }
            },
            complete: function () {
                calculateTaxTotal();
            },
        });

    }
</script>
<!-- For Delete Incoming Payments -->
<script type="text/javascript">
    $("#btnDelete").click(function (e) {
        var ReceiptNo = document.getElementById('txtReceiptNo').value;
        var Voucher = document.getElementById('txtVoucher').value;
        //var PaymentAgainst = $('input[name=PaymentAgainst]:checked').val();
        if (ReceiptNo != '') {
            if (confirm('Are you sure to delete the record?'))
            {
                $.ajax({

                    type: "Post",
                    url:'@Url.Content("~/SaleOrder/DeleteIP")', 
                    dataType: "json",
                    contentType: 'application/json',
                    data: JSON.stringify({ ReceiptNo: ReceiptNo, Voucher: Voucher }),
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        alert(data);
                        //window.location.href = '@Url.Action("IncomingPayments", "Payments")';
                        window.location.reload();
                    }
                });
            }
            else
            {
                return
            }
        }
        else {
            alert('Receipt no should not be empty');
        }
    });
</script>

@* Voucher Working  *@
<script>

    $("#btnVoucher").click(function () {
        var check;
        var vouch;
        var leadId= $('#txtReceiptNo').val();
        
       
        

        var baseurl = '@Url.Action("VoucherMain", "Voucher")';

        var url = baseurl + '?leadId=' + leadId + '&type=PR' + '&VouchNo=' + vouch;
        window.open(url, "_blank", "width=1000,height=600");
        //window.location.href = baseurl;
        //window.open(baseurl, '_blank');

    })
</script>